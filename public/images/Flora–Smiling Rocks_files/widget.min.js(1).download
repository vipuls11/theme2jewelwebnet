var StampedFn=StampedFn||function(e,t){var a,s,r,d,n,o,l,p,c,m,u,h,v,f,g,w,y,b,$,k,_,S,C,I,x,T,O,E,U,q,A,j,N,G,L,R,F,P,D,K,z,W,M,B,V,Q,H,Y,X={DEFAULT_ENDPOINT:e.stamped_ajax_url||"//stamped.io/api",SECURE_ENDPOINT:e.stamped_ajax_secure_url||"https://stamped.io/api",metafields:e.mainWidgetMetafields||"",exclude_main_css:e.stamped_exclude_main_css||!1,exclude_font:e.stamped_disable_font||!1,disable_single_review:e.stamped_disable_review_single||!1,modal_ugc_image_viewer:e.stamped_modal_ugc_viewer_type||"image",is_preview:e.isStampedLauncherPreview||!1,is_init_rewards:!0,is_force_jquery:e.stamped_force_jquery||!1,is_disable_cache_badge:e.stamped_disable_cache_badge||!1,is_disable_cache:e.stamped_disable_cache||!1,referral_code:null,is_rewards_code_copy:!1,is_ignore_submit_error:!1,rewards_apply_discount_url_format:e.stamped_rewards_apply_discount_url_format||"",slick_options:e.stamped_slick_options||{dots:!1,infinite:!1,speed:300,slidesToShow:4,slidesToScroll:4,slide:".stamped-review",initialSlide:0,rows:0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]},includes_options:{rewards_button_js:!0,rewards_window_js:!0}},J=!1,Z=!1;e.StampedGlobalOptions={},e.isInitializedStamped=!1;var ee,et,ea,es=[],er=[],ei=[],ed={},en="div#stamped-main-widget",eo={},el="html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video { margin: 0; padding: 0; border: 0; font-size: 100%; font: inherit; vertical-align: baseline; }";function ep(){var t,a=!1;return t=navigator.userAgent||navigator.vendor||e.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(a=!0),a}function ec(e){if("click"===e.type)return!0;if("keypress"!==e.type)return!1;var t=e.charCode||e.keyCode;if(32===t||13===t)return!0}function em(a){var s=t.createElement("span");s.appendChild(t.createTextNode(a)),s.id="tempCopyToClipboard",t.body.append(s);var r=t.createRange();r.selectNode(s),e.getSelection().removeAllRanges(),e.getSelection().addRange(r),t.execCommand("copy"),e.getSelection().removeAllRanges(),s.remove()}function eu(){return(eu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}function eh(a,s){s?(to("Using included jQ"),et=s,e.jQueryStamped=et,to(et)):(to("Loaded jQ"),e.jQueryStamped=et),/msie/.test(e.navigator.userAgent.toLowerCase())&&(et.support.cors=!0),!0!=X.exclude_font&&et("head").append(et("<link/>",{rel:"stylesheet",href:"//fonts.googleapis.com/css?family=Open+Sans:400,600&display=swap",type:"text/css"}));var r=tn("stamped_referral_code")||tn("stamped_ref");r&&(tp("stamped_referral_code",{code:r}),X.referral_code=r);var d=tc("stamped_referral_code");d&&d.code&&(X.referral_code=d.code),to("Library Starting..."),et.isReady?ev():et(t).ready(function(){ev()}),setTimeout(function(){Z||(to("Library not started, fallback"),ev())},3e3)}function ev(){Z||(to("Started library"),t_("stamped:init:starting"),ef(),eg()),Z=!0}function ef(){if(to("Starting UGC..."),(ea=et(en)).length){if(et.trim(ea.html())){ej(),eD(),eR(),eL(),eq(),eF();try{e.LazyLoadStamped&&LazyLoadStamped.update&&LazyLoadStamped.update()}catch(a){}}else eA();et(t).on("click keypress",".stamped-summary-ratings .summary-rating",function(e){if(!0===ec(e)){var t=et(this).find(".summary-rating-bar"),a=t.attr("data-rating"),s=t.hasClass("selected");et(".stamped-summary-ratings .summary-rating").each(function(){et(this).removeClass("selected")}),et(".summary-rating-bar").each(function(){et(this).removeClass("selected")}),a&&(s?(ta(1),et(".stamped-summary-ratings").removeClass("selected")):(t.addClass("selected"),et(this).addClass("selected"),et(".stamped-summary-ratings").addClass("selected"),ta(1,a)))}}),et(t).on("mouseover mouseout",".stamped-form-review-rating a.fa",function(e){var t,a,s;s=et(t=e.currentTarget).attr("data-value"),a=et(t).parent(),"mouseover"===e.type?(a.find("a.fa:lt("+s+")").removeClass("fa-star-o").addClass("fa-star"),a.find("a.fa:gt("+(s-1)+")").removeClass("spr-icon-star-hover").addClass("fa-star-o")):a.find("a.fa").removeClass("fa-star").addClass("fa-star-o")}),et(t).on("click keypress",".stamped-tabs li",function(e){!0===ec(e)&&e4(this)}),et(t).on("keypress",".stamped-summary-actions-newreview",function(e){!0===ec(e)&&eJ("review")}),et(t).on("keypress",".stamped-summary-actions-newquestion",function(e){!0===ec(e)&&eJ("question")}),et(t).on("keypress",".stamped-form-input a",function(e){!0===ec(e)&&eZ(this)}),s="#shopry-rating-wrapper a.shopry-thumbs-up, #shopry-rating-wrapper a.shopry-thumbs-down, #shopry-rating-holder a.shopry-thumbs-up, #shopry-rating-holder a.shopry-thumbs-down, #stamped-rating-holder a.stamped-thumbs-up, #stamped-rating-holder a.stamped-thumbs-down, .stamped-rating-holder a.stamped-thumbs-up, .stamped-rating-holder a.stamped-thumbs-down",et(t).off("click keypress",s).on("click keypress",s,function(t){if(!0===ec(t)){var a=et(this).attr("data-review-id"),s=et(this).attr("data-question-id"),r=et(this).attr("data-rating"),d=ea.attr("data-product-id"),n=et(this),o=n.parent();o.fadeTo("slow",.3),n.addClass("disable-link"),et.ajax({type:"POST",url:X.SECURE_ENDPOINT+"/"+(a?"reviews":"questions")+"/vote",data:{productId:d,reviewId:a,questionId:s,vote:r,apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl},success:function(e){et(".stamped-thumbs-up i",o).html("&nbsp; "+e.voteUp),et(".stamped-thumbs-down i",o).html("&nbsp; "+e.voteDown),o.fadeTo("slow",1),n.removeClass("disable-link")}})}}),r=".stamped-share-button, .stamped-share-icon",et(t).off("click keypress",r).on("click keypress",r,function(e){!0===ec(e)&&et(this).parent().find(".stamped-share-links").fadeToggle()}),et(t).on("click keypress",".stamped-summary-actions-mobile-filter",function(e){if(!0===ec(e)){var t=et(".stamped-filters-wrapper");t.hasClass("stamped-mobile-visible")?(t.slideUp(),t.removeClass("stamped-mobile-visible")):(t.slideDown(),t.addClass("stamped-mobile-visible"))}}),et(t).on("click keypress",".stamped-summary-keywords-list li",function(e){if(!0===ec(e)){var t=et(this);t.hasClass("selected")?(et(".stamped-summary-keywords-list li").removeClass("selected"),et(ea).removeAttr("data-keyword")):(et(".stamped-summary-keywords-list li").removeClass("selected"),t.addClass("selected"),et(ea).attr("data-keyword",t.text().trim())),et(".stamped-summary-actions-clear").show(),ta(1)}}),et(t).on("change keyup",".stamped-reviews-search-input",function(e){var t=et(this).val();if(t?(et(".stamped-reviews-search-clear").show(),et(".stamped-reviews",ea).attr("data-filtered","true")):(et(".stamped-reviews-search-clear").hide(),et(".stamped-reviews",ea).removeAttr("data-filtered")),13==e.keyCode){var t=et(this).val();t&&(et(ea).attr("data-search",t.trim()),et(".stamped-summary-actions-clear").show(),eP(),ta(1))}}),et(t).on("click keypress",".stamped-reviews-search-button",function(e){if(!0===ec(event)){var t=et(".stamped-reviews-search-input").val();t&&(et(ea).attr("data-search",t.trim()),et(".stamped-summary-actions-clear").show(),eP(),ta(1))}}),et(t).on("click keypress",".stamped-reviews-search-clear",function(e){!0===ec(e)&&(et(".stamped-reviews-search-clear").hide(),et(".stamped-reviews-search-input").val(""),et(ea).removeAttr("data-search"),ta(1))}),et(t).on("click keypress",".stamped-summary-actions-clear",function(e){if(!0===ec(e)){var t=et(this).data("type");ts(t)}}),et(t).on("change keyup",".stamped-questions-search-input",function(e){var t=et(this).val();if(t?(et(".stamped-questions-search-clear").show(),et(".stamped-questions",ea).attr("data-filtered","true")):(et(".stamped-questions-search-clear").hide(),et(".stamped-questions",ea).removeAttr("data-filtered")),13==e.keyCode){var t=et(this).val();t&&(et(ea).attr("data-search-qna",t.trim()),et(".stamped-summary-actions-clear").show(),tt())}}),et(t).on("click keypress",".stamped-questions-search-button",function(e){if(!0===ec(event)){var t=et(".stamped-questions-questions-input").val();t&&(et(ea).attr("data-search-qna",t.trim()),et(".stamped-summary-actions-clear").show(),tt())}}),et(t).on("click keypress",".stamped-questions-search-clear",function(e){!0===ec(e)&&(et(".stamped-questions-search-clear").hide(),et(".stamped-questions-search-input").val(""),et(ea).removeAttr("data-search-qna"),tt())}),et(t).one("stamped:reviews:loaded",function(){to("Main Widget event triggered reload once"),ej(),eD(),eR(),eF();var e=tn("write_review");e&&eJ("review");var e=tn("write_question");e&&eJ("question")}),et(t).on("stamped:reviews:loaded",function(t){to("Main Widget event triggered reload"),ei=[],eL(),eq();try{e.LazyLoadStamped&&LazyLoadStamped.update&&LazyLoadStamped.update()}catch(a){}et(".stamped-tabs > li").click(function(){Array.prototype.slice.call(this.parentNode.children).forEach(function(e){e.setAttribute("aria-selected",!1)});var e=this.getAttribute("aria-selected");this.setAttribute("aria-selected",!JSON.parse(e))}),et(".stamped-share-icon").click(function(){var e=et(this).siblings(".stamped-share-links"),t=e.attr("aria-expanded");e.attr("aria-expanded","true"==(void 0!==t&&!1!==t?t:"false")?"false":"true"),et(this).toggleClass("stamped-active")}),et(".stamped-rating-holder > a").click(function(){Array.prototype.slice.call(this.parentNode.children).forEach(function(e){e.setAttribute("aria-pressed",!1)});var e=this.getAttribute("aria-pressed");this.setAttribute("aria-pressed",!JSON.parse(e))})})}et(t).one("stamped:launcher:loaded",function(t){var a=tn("rewards-launcher");et(e).on("hashchange",function(){location.hash.indexOf("stamped-rewards")>=0&&e$()}),a&&("open"==a&&e$(),a.indexOf("view-")>-1&&(e$(!0),eC(a)))}),e0(),eN();var s,r,d,n=tn("stamped_r_id");n&&!0!=X.disable_single_review&&(d=n,et.ajax({type:"GET",url:X.SECURE_ENDPOINT+"/widget/reviews",data:{reviewId:d,apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,type:"single",showAvatar:"True",minRating:1},success:function(e){e.data&&StampedFn.openUGCModal([e.data],0,t,1,!1,0)},error:function(e){}}))}function eg(e){to("Starting Rewards...");var t=et("#stamped-rewards-init");if(e&&e.customer){to("Started Rewards with direct data"),eo=e,ey();return}e?(to("Started Rewards with JS data"),eo.customer=e,ew()):t.length>0?(to("Started Rewards with div data"),eo.customer={customerId:t.data("customer-id"),customerEmail:t.data("customer-email"),customerFirstName:t.data("customer-first-name"),customerLastName:t.data("customer-last-name"),customerTags:t.data("customer-tags"),customerLocale:t.data("customer-locale"),totalOrders:0,totalSpent:t.data("customer-total-spent"),isAcceptMarketing:t.data("customer-accepts-marketing"),authToken:t.data("key-auth")},ew()):to("Started Rewards no init customer data")}function ew(){to("Loading Rewards API init...");var t=X.metafields||"";eo&&eo.customer&&t&&(eo.customer.metafields=t);var a=JSON.stringify(eo.customer),s=X.is_test;et.ajax({type:"POST",url:X.SECURE_ENDPOINT+"/v2/rewards/init?"+et.param({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,debug:null,isTest:s,isPreview:X.is_preview,referralCode:X.referral_code}),xhrFields:{withCredentials:!0},data:a,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e,t,a){t_("stamped:rewards:init"),eo=e,ey()}})}function ey(){var a,s;!function e(){if(!et("#stamped-rewards-init").length){var a=t.createElement("div");a.setAttribute("id","stamped-rewards-init"),t.body.appendChild(a)}}(),eo&&eo.html&&((R=et("#stamped-rewards-init")).html(eo.html.main),D=et(".stamped-rewards-launcher",R),K=et(".stamped-launcher-button",R),M=et("<iframe>"),a=K.html(),to("Func _buildIframeLauncher: width:"+K.width(),1),to("Func _buildIframeLauncher: outerWidth:"+K.outerWidth(),1),to("Func _buildIframeLauncher: var launcherWidth:"+(H=K.width()+40),1),K.width(H),K.html(M),D.hide(),setTimeout(function(){B=M[0].contentWindow.document,M[0].contentWindow.StampedFn=StampedFn,M[0].contentWindow.jQuery=jQuery;var e=et("body",B),t=et("head",B);if(e.html(a),e.append(et("#stamped-rewards-main-css",R).clone()),t.append(et("<link/>",{rel:"stylesheet",href:"//cdn1.stamped.io/files/rewards-launcher.min.css",type:"text/css"})),!1!=X.includes_options.rewards_button_js){var s=B.createElement("script");s.type="text/javascript",s.src="//kit.fontawesome.com/59de3073ed.js",s.setAttribute("data-observe-mutations","true"),B.body.appendChild(s)}t.append("<style>"+el+' body { overflow:hidden; } .stamped-launcher-icon-opened { font-family:"Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; display:inline-block; width: 100%; margin-top: -2px; text-align:center;}</style>'),ep()&&e.attr("data-mobile",!0),z=et(".stamped-launcher-icon-closed",e),W=et(".stamped-launcher-icon-opened",e),D.fadeIn()},300),F=et(".stamped-rewards-base",R),$launcherCss=et("#stamped-rewards-main-css",R).clone(),V=et("<iframe>"),s=F.html(),F.html(V),setTimeout(function(){Q=V[0].contentWindow.document,V[0].contentWindow.StampedFn=StampedFn,V[0].contentWindow.jQuery=jQuery;var a=et("body",Q),r=et("head",Q);a.html(s),a.append(et("#stamped-rewards-main-css",R).clone()),r.append(et("<link/>",{rel:"stylesheet",href:"//cdn1.stamped.io/files/rewards-main.min.css",type:"text/css"})),!0!=X.exclude_font&&r.append(et("<link/>",{rel:"stylesheet",href:"//fonts.googleapis.com/css?family=Open+Sans:400,600&display=swap",type:"text/css"})),r.append("<script>window.FontAwesomeConfig = { searchPseudoElements: true };</script>");var d,n=Q.createElement("script");n.type="text/javascript",n.src="//kit.fontawesome.com/59de3073ed.js",n.setAttribute("data-observe-mutations","true"),n.setAttribute("data-search-pseudo-elements","true"),Q.body.appendChild(n),a.append("<style>"+el+' .stamped-rewards-window { font-family:"Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; }</style>'),ep()&&a.attr("data-mobile",!0),eo.customer&&eo.customer.customerEmail?a.attr("data-logged-in",!0):a.attr("data-logged-in",!1),!0==eo.branding&&a.attr("data-branding",!0),$wrapperCards=et("#stamped-rewards-cards",Q),$wrapperViews=et("#stamped-rewards-views",Q),et(Q).on("click",".stamped-rewards-header-close",function(){e$()}),et(t).on("touchstart",function(){d=!0}),et(t).on("touchmove",function(){d=!1}),et(t).on("click touchend",function(e){if("click"===e.type&&(d=!0),d){if("stamped-rewards-init"===e.target.id||et(e.target).parents("#stamped-rewards-init").length||et(e.target).parents(".stamped-rewards-base").length||et(e.target).parents(".stamped-rewards-launcher").length||et(e.target).parents("#stamped-rewards-widget").length);else{var t=et(".stamped-rewards-base",R).hasClass("opened");setTimeout(function(){t&&StampedFn.toggleLauncher()},300)}}}),et(Q).on("click",'[data-campaign-completed="false"] .stamped-reward-card-button-earn',function(){var e=et(this).parent(".stamped-rewards-card-earn"),t=et(this),a=e.data("campaign-id"),s=e.data("event-type");if("AccountBirthday"==s){var r=et(".stamped-rewards-birthday-input-holder",Q);r.show();var d=et(".stamped-rewards-birthday-input-holder select.DOBDay option:checked",Q).val(),n=et(".stamped-rewards-birthday-input-holder select.DOBMonth option:checked",Q).val(),o=et(".stamped-rewards-birthday-input-holder select.DOBYear option:checked",Q).val();d&&n&&o&&(eU(t,"loading",!0),eT({campaignId:a,campaignEventType:s,birthday:o+"-"+n+"-"+d,callback:function(){eU(t,"active",!0,null,function(){e.attr("data-campaign-completed","true"),e.attr("data-birthday","true"),ew()}),r.hide()}}))}else{var l="reviews";"Review"==s||"ReviewPhoto"==s||"ReviewVideo"==s?("reviews"==l&&et('.stamped-rewards-header-menu span[data-target="reviews"]',Q).trigger("click"),eC("main")):(eU(t,"loading",!0),eT({campaignId:a,campaignEventType:s,callback:function(){eU(t,"active",!0,null,function(){e.attr("data-campaign-completed","true")})}}))}}),et(Q).on("click",'[data-campaign-redeemable="true"] .stamped-reward-card-button-spend',function(){var e=et(this),t=e.parent(".stamped-rewards-card-spend"),a=t.data("campaign-id");"Variable"==t.data("coupon-type")?eC("view-redeem-variable",null,{entityId:a}):(eU(e,"loading",!0),eO({campaignId:a,callback:function(t){eC("view-coupon",null,t.rewardCampaignCoupon),eU(e,"active",!0,1)}}))}),et(Q).on("click",".stamped-reward-referral-platforms button",function(){var t,a=et(this).attr("href");a&&(t=a,e.open(t,"_blank","location=yes,height=500,width=500,top=50,left=50,scrollbars=yes,status=yes"))}),et(Q).on("click",".stamped-rewards-header-menu span",function(){var e=et(this).attr("data-target");e!=$wrapperCards.attr("data-target")&&($wrapperCards.attr("data-target",e),eS(e),et(".stamped-rewards-content-container",Q).scrollTop(0),et(".stamped-rewards-header-menu .active",Q).removeClass("active"),et(this,Q).addClass("active"))}),et(".stamped-rewards-content-container",Q).on("scroll",function(){var e=et(".stamped-rewards-content-container",Q).scrollTop();if(e<=1){et(".stamped-rewards-background",Q).height("200px"),et(".stamped-rewards-header",Q).height("auto");return}var t=et(".stamped-rewards-header-content",Q).outerHeight()+15;et(".stamped-rewards-header",Q).css("min-height","70px");var a=200;a-=e,et(".stamped-rewards-background",Q).height(a);var s=t;s-=e,et(".stamped-rewards-header",Q).height(s)}),eS("rewards"),t_("stamped:launcher:loaded")},1e3),eG())}function eb(){return eo}function e$(t){var a=F.hasClass("opened");et("body",Q).addClass("opened"),a?!0!=t&&(to("Func _toggleRewardsModal: var launcherWidth:"+H,1),F.removeClass("opened"),F.fadeOut(),D.removeClass("opened"),z.removeClass("rotateIn"),W.removeClass("fadeOut"),W.addClass("fadeIn"),K.animate({width:H+"px"},0),setTimeout(function(){eC("main")},1e3),t_("stamped:launcher:closed")):(setTimeout(function(){F.addClass("opened")},100),D.addClass("opened"),F.fadeIn(),z.addClass("rotateIn"),z.removeClass("rotateOut"),W.addClass("fadeOut"),W.removeClass("fadeIn"),K.animate({width:"40px"},0),et(".stamped-rewards-content-container",Q).scrollTop(0),et(".stamped-rewards-header",Q).css("height","auto"),t_("stamped:launcher:opened"),"true"!=e9("stamped-launcher-opened")&&(et.ajax({type:"POST",url:X.SECURE_ENDPOINT+"/tracking/event?"+et.param({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,source:"launcher",event:"open"}),dataType:"json",success:function(e,t,a){}}),eV("stamped-launcher-opened",!0,1)))}function ek(t,a,s){var r=t.search,d=t.customOptionTitle?t.customOptionTitle+"||"+t.customOptionValue:"",n=t.topic,o=1;d&&(o=2),n&&(o=3),et.ajax({type:"POST",url:X.SECURE_ENDPOINT+"/tracking/event?"+et.param({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,event:"search",source:"m"}),data:JSON.stringify({source:"m",sourceId:a,type:o,text:r||n||d,results:s}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e,t,a){}})}function e8(t){et.ajax({type:"POST",url:X.SECURE_ENDPOINT+"/v2/rewards/points?"+et.param({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl}),data:eo.customer,dataType:"json",success:function(e,a,s){setTimeout(function(){et(".stamped-rewards-header-main-points, .stamped-rewards-header-small-points",Q).html(e.points_current_with_name)},5e3),t&&t(e)}})}function e_(t){return t=t||{},eo||eo.customer||console.log("Customer not logged in to create reward activity"),et.ajax({type:"POST",url:X.SECURE_ENDPOINT+"/v2/rewards/add?"+et.param({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,campaignId:t.campaignId}),data:eo.customer,dataType:"json",success:function(e,a,s){t.callback&&t.callback(e,a,s),e8(),t_("stamped:rewards:earned",{detail:e})}})}function eS(e){$wrapperCards.html(""),et("body",Q).attr("data-view",e);for(var t=0;t<eo.html.cards.length;t++){var a=eo.html.cards[t];if(a&&a.html&&e==a.type){var s=et(a.html);s.attr("data-key",a.key),$wrapperCards.append(s)}}}function eC(t,a,s){P=et(".stamped-rewards-window",Q),et(".stamped-rewards-content-container",Q).scrollTop(0),et(".stamped-rewards-header-nav",Q).attr("onclick","StampedFn.loadLauncherView('main');"),et("body",Q).attr("data-view",t);var r=et(a).attr("data-title");if(P){if("main"==t){P.removeClass("stamped-rewards-nav-small"),P.addClass("stamped-rewards-nav-big"),et(".stamped-rewards-header-main, .stamped-rewards-header-menu",Q).fadeIn(),et(".stamped-rewards-header-small",Q).hide();var d=et(".stamped-rewards-header-content",Q).outerHeight()+15;et(".stamped-rewards-header",Q).height(d),et(".stamped-rewards-background",Q).height("200"),$wrapperViews.hide(),$wrapperCards.fadeIn()}else{var n=!1;if(s&&!0==s.reload)n=!1;else if("view-redeem-variable"==t)n=!1;else for(var o=0;o<eo.html.views.length;o++){var l=eo.html.views[o];l.key==t&&(l.title&&(r=l.title),n=!0,eI(l.html),ex(t,r,s))}if(!n){eI(),ex(t,r,s);var p=null;s&&s.entityId&&(p=s.entityId);var c=X.is_test;et.ajax({type:"POST",url:X.SECURE_ENDPOINT+"/v2/rewards/cardview?"+et.param({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,viewKey:t,entityId:p,referralCode:X.referral_code,isTest:c}),data:eo.customer,dataType:"json",success:function(e,a,d){e&&e.html?(eo.html.views.push(e),setTimeout(function(){eI(e.html,!1),ex(t,e.title||r,s)},1e3)):eC("main")},error:function(){eC("main")}})}}}}function eI(e,t){if(e){var a=et(e);$wrapperViews.html(a),$wrapperViews.removeClass("loading")}else $wrapperViews.html(""),et(".stamped-view-loader",$wrapperViews).length||$wrapperViews.append(et('<div class="stamped-view-loader"></div>')),$wrapperViews.addClass("loading");!1!=t&&(P.addClass("stamped-rewards-nav-small"),P.removeClass("stamped-rewards-nav-big"),et(".stamped-rewards-header-main, .stamped-rewards-header-menu",Q).hide(),et(".stamped-rewards-header-small",Q).fadeIn(),$wrapperCards.hide(),$wrapperViews.fadeIn())}function ex(e,t,a){var s,r,d=(a?a.viewTitle:t)||t;if("view-coupon"==e){et(".stamped-reward-coupon-code",$wrapperViews).text(a.couponCode),et(".stamped-reward-card-title",$wrapperViews).html(a.title),s=!0,et(".stamped-rewards-header-nav",Q).attr("onclick","StampedFn.loadLauncherView('view-your-rewards', null, { reload: "+(s||!1)+"});")}if("view-earnings"==e&&eo&&eo.customer){var n=et('[data-event-type="AccountBirthday"]',Q);n.length&&(eo.customer.dateBirthday?n.attr("data-birthday","true"):(n.attr("data-birthday","false"),n.prepend(et(".stamped-rewards-birthday-input-holder",Q))))}if("view-redeem-variable"==e&&($selectorInput=et(".range-slider__range",$wrapperViews)).length){var o=$selectorInput.data("format-points"),l=$selectorInput.data("format-points-name"),p=$selectorInput.data("currency"),c=$selectorInput.attr("step"),m=$selectorInput.data("discount-value");function u(){var e=$selectorInput.val(),t=new Intl.NumberFormat("en-US",{style:"currency",currency:p});et("#redeem-points",$wrapperViews).text(o.formatStringStamped(e,l)),et("#redeem-amount",$wrapperViews).text(t.format(e/c*m))}$selectorInput.on("input",function(){u()}),et(".stamped-rewards-content-action-button ",$wrapperViews).on("click",function(){var e,t,s;e=this,t=$selectorInput.val(),s={campaignId:a.entityId,points:t},StampedFn.rewardsRedeem(et(e),s,function(e){var t=e.rewardCampaignCoupon.couponCode,a=e.rewardCampaignCoupon.title;eC("view-coupon",null,{couponCode:t,title:a,viewTitle:a})})}),u()}d&&(r=d,et(".stamped-rewards-header-small-title",Q).text(r))}function eT(t){var a,s=(t=t||{}).campaignEventType;if("AccountBirthday"==s)a=(a=t)||{},et.ajax({type:"POST",url:X.SECURE_ENDPOINT+"/v2/rewards/addBirthday?"+et.param({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,dateBirthday:a.birthday}),data:eo.customer,success:function(e,t,s){a.callback&&a.callback()}});else if("SocialFollowInstagram"==s||"SocialFollowFacebook"==s||"SocialShareFacebook"==s||"SocialFollowTwitter"==s||"SocialShareTwitter"==s||"SocialYouTube"==s||"SocialFollowTiktok"==s||"SocialShareTiktok"==s||"SocialFollowPinterest"==s){e_({campaignId:t.campaignId,callback:t.callback});var r=eo.links;if("SocialFollowInstagram"==s){var d=e.open(r.instagram,"_blank");d.focus()}else if("SocialFollowFacebook"==s)e.open("https://www.facebook.com/plugins/page.php?href="+r.facebook,"_blank","location=yes,height=250,width=340,top=50,left=50,scrollbars=yes,status=yes");else if("SocialShareFacebook"==s)e.open("https://www.facebook.com/sharer/sharer.php?u="+r.shop,"_blank","location=yes,height=500,width=500,top=50,left=50,scrollbars=yes,status=yes");else if("SocialFollowTwitter"==s){var d=e.open(r.twitter,"_blank");d.focus()}else"SocialShareTwitter"==s?e.open("https://twitter.com/intent/tweet?url="+r.shop,"_blank","location=yes,height=500,width=500,top=50,left=50,scrollbars=yes,status=yes"):"SocialYouTube"==s?e.open(r.youtube,"_blank"):"SocialFollowTiktok"==s||"SocialShareTiktok"==s?e.open(r.tiktok,"_blank"):"SocialFollowPinterest"==s&&e.open(r.pinterest,"_blank")}}function eO(t){var a;a=a={campaignId:(t=t||{}).campaignId,callback:t.callback},et.ajax({type:"POST",url:X.SECURE_ENDPOINT+"/v2/rewards/redeem?"+et.param({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,campaignId:a.campaignId,points:a.points}),data:eo.customer,dataType:"json",success:function(e,t,s){a.callback&&a.callback(e),e8(),t_("stamped:rewards:redeemed",{detail:e})}})}function eE(e){var t=et("#stamped-rewards-apply-code",Q);"active"==e&&et(".stamped-rewards-coupons-view",Q).attr("data-applied","true"),eU(t,e)}function eU(e,t,a,s,r){if("loading"==t){var d=e.width();e.attr("data-original-text",e.text()),e.addClass("stamped-button-disabled"),d>=10&&e.width(d),e.html('<span class="stamped-button-icon stamped-button-loading"></span>')}else a||e.html('<span class="stamped-button-icon stamped-button-completed"></span>'),setTimeout(function(){var t=e.attr("data-original-text");e.html(t),e.removeClass("stamped-button-disabled"),e.width("auto"),r&&r()},s||7878)}function eq(){to("Func initWidgetType");var t=et(".stamped-container",ea).attr("data-widget-style");if("slider"==t){Y=et(".stamped-reviews",ea),to(Y,1);var a=Y&&Y.hasClass("slick-initialized");(to("Func initWidgetType: var initialized:"+a,1),a)?(Y.slick("slickAdd",et(".stamped-reviews > .stamped-review")),et('.stamped-reviews [class*="stamped-review"]',ea).length<=0?et("button.slick-arrow").hide():et("button.slick-arrow").show()):tl("//cdn.stamped.io/cdn/js/slick.min.js",function(){Y.slick(X.slick_options),Y.on("afterChange",function(e,t,a){if(et(".slick-next.slick-arrow").hasClass("slick-disabled")){_lastSlide=a;var s=et(".stamped-pagination .next a");s.length&&s.click()}})})}else if("masonry"==t){var s={container:".stamped-reviews",margin:{x:15,y:15},breakAt:{1500:4,1200:3,700:2,500:2},columns:4};e.macyInstanceConfig&&(e.macyInstanceConfig.breakAt&&(s.breakAt=e.macyInstanceConfig.breakAt),e.macyInstanceConfig.columns&&(s.columns=e.macyInstanceConfig.columns)),tl("//cdn.stamped.io/cdn/js/macy2.js",function(){e.macyInstanceStamped=Macy(s),t_("stamped:macy:loaded")})}if(et(".stamped-sort-select").length){var r=ea.attr("data-sort")||et(".stamped-container",ea).attr("data-widget-sort");if(r){var d=et('.stamped-sort-select option[value="'+r+'"]');d.css("display")&&"none"!==d.css("display")&&et(".stamped-sort-select").val(r)}}}function eA(e){ea&&ea.length&&!e||(ea=et(en)),ez()}function ej(){to("Creating Q&A"),e2()}function e0(){var a;to("Loading Badges..."),(es=et(".stamped-product-reviews-badge[data-id], .stamped-product-reviews-badge[data-product-id]")).length&&(a=et.map(es,function(e){if(!et.trim(et(e).html())&&(et(e).attr("data-id")||et(e).attr("data-product-id")||et(e).attr("data-type")||et(e).attr("data-product-type")||et(e).attr("data-product-sku")||et(e).attr("data-product-title")))return{productId:et(e).attr("data-id")||et(e).attr("data-product-id"),productType:et(e).attr("data-product-type"),productSKU:et(e).attr("data-product-sku")||et(e).attr("data-product-sku2"),productTitle:et(e).attr("data-product-title")}}))&&a.length&&et.ajax({type:"POST",dataType:"json",contentType:"application/json",url:X.SECURE_ENDPOINT+"/widget/badges"+(!0===X.is_disable_cache_badge?"?isUseCache=false":""),data:JSON.stringify({productIds:a,apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl}),success:function(e){es.each(function(t){var a=et(this).attr("data-id")||et(this).attr("data-product-id"),s=et(this).attr("data-type"),r=et.map(e,function(e,t){if(e.productId==a)return t})[0];r>=0&&(!s||"review"==s)?et(this).html(e[r].badge):r>=0&&"qna"==s&&et(this).html(e[r].badgeqna)}),t_("stamped:badges:loaded")},error:function(e){}}),et(".stamped-product-reviews-badge[data-id].stamped-main-badge, .stamped-product-reviews-badge:first").length&&et(t).on("click",".stamped-product-reviews-badge[data-id].stamped-main-badge, .stamped-product-reviews-badge:first",function(){"qna"===et(this).attr("data-type")?(et("#stamped-questions-placeholder").length?eY("#stamped-questions-placeholder"):(e4(null,"questions"),eY(en)),et(".stamped-badge-caption[data-questions]").length&&"0"===et(".stamped-badge-caption[data-questions]").attr("data-questions")&&et(".new-question-form").show()):(e4(null,"reviews"),eY(en))})}function eN(){var e=et("#stamped-reviews-widget").length;if(to("Creating display widgets "+e+" found"),t_("stamped:widget:reloading"),e>0){var t=[],a=1;et("[id=stamped-reviews-widget]").each(function(e){var s=et(this);s.attr("data-element-id",a);var r=eB(s);t.push(r),a++}),e5("ugc",t)}}function eG(){var e=eo;if(e.points){var t=e.points.points;et("[id=stamped-rewards-points-placeholder]").attr("onclick","StampedFn.toggleRewardsModal();"),et("[id=stamped-rewards-points-placeholder]").html(e.points.points_current_with_name),et('[id=stamped-rewards-points-placeholder][data-type="points-only"]').html(t),e.customer&&et("[id=stamped-rewards-viptier-placeholder]").html(e.customer.vipTierTitle);var a=et('[id=stamped-rewards-points-placeholder][data-type="points-price"]');if(a.length&&t>=0){var s,r=a.attr("data-ratio"),d=a.attr("data-symbol");r&&parseInt(r)&&(s=t>0?(t/r).toFixed(2):0,a.html(d+s))}}if(e.customer&&et("[id=stamped-rewards-referral-placeholder]").html(e.customer.urlReferral),et("#stamped-rewards-widget").length>0){var n=[],o=1;et("[id=stamped-rewards-widget]").each(function(e){var t=et(this);t.attr("data-element-id",o);var a=eB(t);n.push(a),o++}),e5("rewards",n)}}function eL(){var e=et(ea).attr("data-limit-words")||et(".stamped-container",ea).attr("data-widget-limit-words"),t=et(ea).attr("data-keyword"),a=et(ea).attr("data-search");(e&&e>0||t||a)&&et(".stamped-review",ea).each(function(s){var r=et(".stamped-review-content-body:first",this);if(r.length){var d,n=et(r).html();if(-1>=n.indexOf("stamped-review-read-more")){if(t||a)t&&(d=e1(n,t)),a&&(d=e1(n,a)),et(r).html(d);else{var o=n.split(" ");o.length>e&&(txtTrimmed=o.slice(0,e).join(" ")+"...",et(r).html(txtTrimmed),et(r).append('<a class="stamped-review-read-more" style="margin-left:10px; cursor:pointer;">read more</span>'),et(r).append('<span class="original-review" style="display:none !important;">'+n+"</span>"))}}}}),et(".stamped-review-reply .stamped-review-reply-body, .stamped-review-reply .stamped-review-content-body").each(function(){if(!et(this).attr("data-link-processed")){et(this).attr("data-link-processed",!0);var e=et(this).html();et(this).html(e.linkify())}})}function eR(){var e=et(ea).attr("data-keywords");if(e){et(".stamped-reviews-filter-label").show(),et(".stamped-summary-keywords").show(),et(ea).removeAttr("data-keywords"),et(".stamped-summary-keywords-list",ea).html("");var t="",a=e.split(",");for(i=0;i<a.length;i++)t+="<li>"+a[i]+"</li>";et(t).appendTo(et(".stamped-summary-keywords-list",ea))}}function eF(){et(t).on("click keypress",".stamped-review-read-more",function(t){if(!0===ec(t)){et(this).closest(".stamped-review-content-body").find(".stamped-review-read-more").hide();var a=et(this).closest(".stamped-review-content-body").find(".original-review").html();et(this).closest(".stamped-review-content-body").html(a),e.macyInstanceStamped&&e.macyInstanceStamped.reInit()}})}function eP(){et(".stamped-summary-ratings").removeClass("selected"),et(".stamped-summary-ratings .summary-rating").each(function(){et(this).removeClass("selected")}),et(".summary-rating-bar").each(function(){et(this).removeClass("selected")})}String.prototype.formatStringStamped=function(){for(var e=this,t=0;t<arguments.length;t++){var a=RegExp("\\{"+t+"\\}","gi");e=e.replace(a,arguments[t])}return e},function(){if("function"==typeof e.CustomEvent)return!1;function a(e,a){a=a||{bubbles:!1,cancelable:!1,detail:void 0};var s=t.createEvent("CustomEvent");return s.initCustomEvent(e,a.bubbles,a.cancelable,a.detail),s}a.prototype=e.Event.prototype,e.CustomEvent=a}(),e.lazyLoadOptionsStamped={elements_selector:".stamped-lazyload"},e.addEventListener("LazyLoad::Initialized",function(t){e.LazyLoadStamped=t.detail.instance},!1),s=(a=void 0!==e)&&!("onscroll"in e)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),r=a&&"IntersectionObserver"in e,d=a&&"classList"in t.createElement("p"),n={elements_selector:"img",container:s||a?t:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",class_loading:"stamped-lazyload-loading",class_loaded:"stamped-lazyload-loaded",class_error:"stamped-lazyload-error",load_delay:0,auto_unobserve:!0,callback_enter:null,callback_exit:null,callback_reveal:null,callback_loaded:null,callback_error:null,callback_finish:null,use_native:!1},o=function(a,s){var r,d=new a(s);try{r=new CustomEvent("LazyLoad::Initialized",{detail:{instance:d}})}catch(n){(r=t.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:d})}try{e.dispatchEvent(r)}catch(o){}},l=function(e,t){return e.getAttribute("data-"+t)},p=function(e,t,a){var s="data-"+t;null!==a?e.setAttribute(s,a):e.removeAttribute(s)},c=function(e){return"true"===l(e,"was-processed")},m=function(e,t){return p(e,"ll-timeout",t)},u=function(e){return l(e,"ll-timeout")},h=function(e,t){e&&e(t)},v=function(e,t){e._loadingCount+=t,0===e._elements.length&&0===e._loadingCount&&h(e._settings.callback_finish)},f=function(e){for(var t,a=[],s=0;t=e.children[s];s+=1)"SOURCE"===t.tagName&&a.push(t);return a},g=function(e,t,a){a&&e.setAttribute(t,a)},w=function(e,t){g(e,"sizes",l(e,t.data_sizes)),g(e,"srcset",l(e,t.data_srcset)),g(e,"src",l(e,t.data_src))},y={IMG:function(e,t){var a=e.parentNode;a&&"PICTURE"===a.tagName&&f(a).forEach(function(e){w(e,t)}),w(e,t)},IFRAME:function(e,t){g(e,"src",l(e,t.data_src))},VIDEO:function(e,t){f(e).forEach(function(e){g(e,"src",l(e,t.data_src))}),g(e,"src",l(e,t.data_src)),e.load()}},b=function(e,t){var a,s,r,d,n,o,p=t._settings,c=y[e.tagName];if(c)return c(e,p),v(t,1),void(t._elements=(n=t._elements,o=e,n.filter(function(e){return e!==o})));a=e,r=l(a,(s=p).data_src),d=l(a,s.data_bg),r&&(a.style.backgroundImage='url("'.concat(r,'")')),d&&(a.style.backgroundImage=d)},$=function(e,t){d?e.classList.add(t):e.className+=(e.className?" ":"")+t},k=function(e,t,a){e.addEventListener(t,a)},_=function(e,t,a){e.removeEventListener(t,a)},S=function(e,t,a){_(e,"load",t),_(e,"loadeddata",t),_(e,"error",a)},C=function(e,t,a){var s,r,n=a._settings,o=t?n.class_loaded:n.class_error,l=t?n.callback_loaded:n.callback_error,p=e.target;s=p,r=n.class_loading,d?s.classList.remove(r):s.className=s.className.replace(RegExp("(^|\\s+)"+r+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,""),$(p,o),h(l,p),v(a,-1)},I=function(e,t){var a,s,r,d=function a(s){C(s,!0,t),S(e,a,n)},n=function a(s){C(s,!1,t),S(e,d,a)};a=e,s=d,r=n,k(a,"load",s),k(a,"loadeddata",s),k(a,"error",r)},x=["IMG","IFRAME","VIDEO"],T=function(e,t){var a=t._observer;U(e,t),a&&t._settings.auto_unobserve&&a.unobserve(e)},O=function(e){var t=u(e);t&&(clearTimeout(t),m(e,null))},E=function(e,t){var a=t._settings.load_delay,s=u(e);s||(s=setTimeout(function(){T(e,t),O(e)},a),m(e,s))},U=function(e,t,a){var s,r=t._settings;!a&&c(e)||(x.indexOf(e.tagName)>-1&&(I(e,t),$(e,r.class_loading)),b(e,t),p(e,"was-processed","true"),h(r.callback_reveal,e),h(r.callback_set,e))},q=function(e){var a;return!!r&&(e._observer=new IntersectionObserver(function(t){t.forEach(function(t){var a,s,r,d,n,o,l;return(a=t).isIntersecting||a.intersectionRatio>0?(s=t.target,void(h((d=(r=e)._settings).callback_enter,s),d.load_delay?E(s,r):T(s,r))):(n=t.target,void(h((l=(o=e)._settings).callback_exit,n),l.load_delay&&O(n)))})},{root:(a=e._settings).container===t?null:a.container,rootMargin:a.thresholds||a.threshold+"px"}),!0)},A=["IMG","IFRAME"],j=function(e,t){var a,s,r;return(r=(a=e||(s=t).container.querySelectorAll(s.elements_selector),Array.prototype.slice.call(a))).filter(function(e){return!c(e)})},(N=function(e,t){var a;this._settings=eu({},n,a=e),this._loadingCount=0,q(this),this.update(t)}).prototype={update:function(e){var t,a,r=this,d=this._settings;(this._elements=j(e,d),!s&&this._observer)?((a=d).use_native&&"loading"in HTMLImageElement.prototype&&((t=this)._elements.forEach(function(e){-1!==A.indexOf(e.tagName)&&(e.setAttribute("loading","lazy"),U(e,t))}),this._elements=j(e,d)),this._elements.forEach(function(e){r._observer.observe(e)})):this.loadAll()},destroy:function(){var e=this;this._observer&&(this._elements.forEach(function(t){e._observer.unobserve(t)}),this._observer=null),this._elements=null,this._settings=null},load:function(e,t){U(e,this,t)},loadAll:function(){var e=this;this._elements.forEach(function(t){T(t,e)})}},a&&function(e,t){if(t){if(t.length)for(var a,s=0;a=t[s];s+=1)o(e,a);else o(e,t)}}(N,e.lazyLoadOptionsStamped),G=void 0!==e?e:this,L=function(){function e(e){return e instanceof Date?e:isNaN(e)?/^\d+$/.test(e)?new Date(t(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(e)):new Date(t(e))}function t(e){return parseInt(e)}function a(e,a,s){a=c[a]?a:c[s]?s:"en";for(var r=0,d=e<0?1:0,n=e=Math.abs(e);e>=m[r]&&r<u;r++)e/=m[r];return(e=t(e))>(0==(r*=2)?9:1)&&(r+=1),c[a](e,r,n)[d].replace("%s",e)}function s(t,a){return((a=a?e(a):new Date)-e(t))/1e3}function r(e){return e.dataset.timeagoStamped?e.dataset.timeagoStamped:d(e,h)}function d(e,t){return e.getAttribute?e.getAttribute(t):e.attr?e.attr(t):void 0}function n(e,t){this.nowDate=e,this.defaultLocale=t||"en"}function o(e,t){return new n(e,t)}var l="second_minute_hour_day_week_month_month".split("_"),p="".split("_"),c={en:function(e,t){if(0===t)return["just now","right now"];var a=l[parseInt(t/2)];return e>1&&(a+="s"),[e+" "+a+" ago","in "+e+" "+a]},zh_CN:function(e,t){if(0===t)return["",""];var a=p[parseInt(t/2)];return[e+a+"",e+a+""]}},m=[60,60,24,7,365/7/12,1],u=6,h="datetime",v="data-tid",f={};return n.prototype.doRender=function(e,t,r){var d,n,o,l=s(t,this.nowDate),p=this;e.innerHTML=a(l,r,this.defaultLocale),f[d=setTimeout(function(){p.doRender(e,t,r),delete f[d]},Math.min(1e3*function e(t){for(var a=1,s=0,r=Math.abs(t);t>=m[s]&&s<u;s++)t/=m[s],a*=m[s];return r%=a,Math.ceil(r=r?a-r:a)}(l),2147483647))]=0,n=e,o=d,n.setAttribute?n.setAttribute(v,o):n.attr&&n.attr(v,o)},n.prototype.formatDateString=function(e,t){return a(s(e,this.nowDate),t,this.defaultLocale)},n.prototype.render=function(e,t){void 0===e.length&&(e=[e]);for(var a=0,s=e.length;a<s;a++)this.doRender(e[a],r(e[a]),t)},n.prototype.setLocale=function(e){this.defaultLocale=e},o.register=function(e,t){c[e]=t},o.cancel=function(e){var t,a;if(e)(t=d(a=e,v))&&(clearTimeout(t),delete f[t]);else{for(t in f)clearTimeout(t);f={}}},o},"object"==typeof module&&module.exports?(module.exports=L(),module.exports.default=module.exports):G.timeagoStamped=L();var e3=0;function eD(){if(e.File&&e.FileReader&&e.FormData){var a,s=et("#stamped-file-uploader-input");s.on("change",function(e){for(var a=e.target.files,d=0;d<a.length;d++){var n=a[d],o=new FileReader;if(t_("stamped:photo:selected"),e3>=5){t_("stamped:photo:maxed");return}if(e3++,n.type.match("image"))r(n,e3);else{if(n.size/1024/1024>50){t_("stamped:photo:sizeError"),alert("Sorry, you cannot add this video to your review. Up to 50mb is allowed.");return}o.onload=function(){var e=new Blob([o.result],{type:n.type}),a=URL.createObjectURL(e),s=t.createElement("video"),r='<div class="stamped-file-photo" data-index="'+e3+'"><img src="https://s3-us-west-2.amazonaws.com/stamped.io/cdn/images/icons/icon-video-placeholder.png" width="70" /><span style="display:none;">'+n.name+'</span><div class="stamped-file-photo-remove" data-index="'+e3+'">x</div></div>',d=function(){l()&&(s.removeEventListener("timeupdate",d),s.pause())};s.addEventListener("loadeddata",function(){l()?s.removeEventListener("timeupdate",d):et(".stamped-file-holder").append(r),er.push(n)});var l=function(){var e=t.createElement("canvas");e.width=s.videoWidth,e.height=s.videoHeight,e.getContext("2d").drawImage(s,0,0,e.width,e.height);var r=e.toDataURL(),d=r.length>1e5;return d&&(et(".stamped-file-holder").append('<div class="stamped-file-photo" data-index="'+e3+'"><img src="'+r+'" width="70" /><span style="display:none;">'+n.name+'</span><div class="stamped-file-photo-remove" data-index="'+e3+'">x</div></div>'),URL.revokeObjectURL(a)),d};s.addEventListener("timeupdate",d),s.preload="metadata",s.src=a,s.muted=!0,s.playsInline=!0,s.play()},o.readAsArrayBuffer(n)}n&&(/^image\//i.test(n.type)||/^video\//i.test(n.type)?console.log("is image, begin upload"):(t_("stamped:photo:invalid"),console.log("Not a valid image!")))}s.val("")}),et(t).on("click",".stamped-file-photo-remove",function(){var e=et(this).parent(".stamped-file-photo"),t=e.index();er.splice(t,1),e3=er.length,e.remove()})}else console.log("File upload is not supported!");function r(e,t){s=e,r=function(e){a=e},(d=new FileReader).onload=function(e){var t=new DataView(e.target.result);if(65496!=t.getUint16(0,!1))return r(-2);for(var a=t.byteLength,s=2;s<a;){var d=t.getUint16(s,!1);if(s+=2,65505==d){if(1165519206!=t.getUint32(s+=2,!1))return r(-1);var n=18761==t.getUint16(s+=6,!1);s+=t.getUint32(s+4,n);var o=t.getUint16(s,n);s+=2;for(var l=0;l<o;l++)if(274==t.getUint16(s+12*l,n))return r(t.getUint16(s+12*l+8,n))}else if((65280&d)!=65280)break;else s+=t.getUint16(s,!1)}return r(-1)},d.readAsArrayBuffer(s.slice(0,65536));var s,r,d,n=new FileReader;n.onloadend=function(){var a,s,r,d,o,l,p,c;a=n.result,s=e.type,r=e.name,d=t,c=new Image,c.src=a,c.onload=(o=d,p=r,void setTimeout(function(){c.width,c.height,et(".stamped-file-holder").append('<div class="stamped-file-photo" data-index="'+o+'"><img src="'+a+'" width="70" /><span style="display:none;">'+p+'</span><div class="stamped-file-photo-remove" data-index="'+o+'">x</div></div>'),function e(t,a,s){var r=function e(t,a){for(var s=t.split(","),r=s[0].match(/:(.*?);/)[1],d=atob(s[1]),n=d.length,o=new Uint8Array(n);n--;)o[n]=d.charCodeAt(n);return new File([o],a,{type:r})}(t,s);er.push(r)}(a,o,p)},100)),c.onerror=function(){console.log("There was an error processing your file!")}},n.onerror=function(){console.log("There was an error reading the file!")},n.readAsDataURL(e)}}var eK=null;function ez(t,a,s,r){if(ea.length&&!J){to("Loading Main Widget...");var d=ea.attr("data-product-id"),n=ea.attr("data-product-ids"),o=ea.attr("data-name"),l=ea.attr("data-product-type"),p=ea.attr("data-product-sku")||ea.attr("data-product-sku2"),c=ea.attr("data-user-reference"),m=ea.attr("data-take-reviews"),u=ea.attr("data-keyword"),h=ea.attr("data-widget-language"),v=ea.attr("data-widget-country-iso"),f=ea.attr("data-widget-type"),g=ea.attr("data-load-type")||et(".stamped-container",ea).attr("data-widget-load-type"),w=ea.attr("data-search"),y=ea.attr("data-cache")||X.is_disable_cache||null,b=et(".stamped-container",ea).attr("data-widget-style"),$=ea.attr("data-tags-exclude"),k=ea.attr("data-tags-include"),_=X.metafields;"slider"==b&&(g="continue"),o&&(o=o.replace("!","")),a||(a=ea.attr("data-sort")||et(".stamped-container",ea).attr("data-widget-sort")),"continue"===g&&(r=!0),et("#stamped-main-widget-placeholder").length&&et("#stamped-main-widget-placeholder").append(ea),J=!0,t&&!r&&eY(".stamped-reviews"),ea.addClass("stamped-main-widget-loading");var S=et("<span>Loading more...</span>").prependTo(et("#stamped-reviews-tab")),C=et.param(eH({productId:d,productIds:n,productName:o,productType:l,productSKU:p,userReference:c,page:t||1,apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,take:m||5,sort:a,rating:s,keyword:u,widgetLanguage:h,widgetCountryIso:v,widgetType:f,search:w,isUseCache:y,tagsExclude:$,tagsInclude:k}));et.isEmptyObject(ed)||(C+="&"+et.param(ed));var I=_.length,x={type:I?"POST":"GET",data:I?JSON.stringify({metafields:_}):null,dataType:"json",url:X.SECURE_ENDPOINT+"/widget"+(I?"/preview":"")+"?"+C,success:function(e){to("Loaded Main Widget..."),J=!1,ea.removeClass("stamped-main-widget-loading"),S.remove();var s,r=e.product,n=e.widget,o=et("#stamped-main-widget .stamped-container").length;if(et(".question-form-wrapper").clone(),et(".stamped-questions").clone(),o||ea.empty().html(r),s="function"==typeof et.parseHTML?et.parseHTML(n):et(n),0==et(".stamped-content",ea).children().length)et(".stamped-content",ea).append(et(s));else{var l=et(".stamped-reviews",ea),p=et('[class="stamped-review"]',s);("continue"!==g||null===t&&void 0===t||1===t&&t)&&et('.stamped-reviews [class*="stamped-review"]',ea).remove();var c=et(".stamped-pagination",s).attr("data-page",t),m=et(".stamped-reviews .stamped-pagination",ea);m.length?et(p).insertBefore(m):et(p).appendTo(".stamped-reviews",ea);var u=et(".stamped-tabs",s);et(".stamped-tabs",ea).replaceWith(u),c.length?m.length?m.replaceWith(c):l.append(c):m.remove()}a&&et(".stamped-sort-select",ea).length&&"none"!==et('.stamped-sort-select option[value="'+a+'"]',ea).css("display")&&(et(".stamped-sort-select",ea).val(a),et(".stamped-container",ea).attr("data-widget-sort",a),et(ea).attr("data-sort",a)),et(".new-review-form").hide(),et(".new-question-form").hide(),t_("stamped:reviews:loaded"),et(".stamped-summary-actions-newreview").attr("aria-controls","new-review-form_"+(null!=d?d:"")),Array.prototype.slice.call(et(".stamped-pagination > li")).forEach(function(e){e.classList.contains("active")?e.children[0].setAttribute("aria-current","page"):e.removeAttribute("aria-current")})},error:function(e){}};_.length&&(x.contentType="application/json"),null!=eK&&eK.abort(),eK=et.ajax(x)}u&&ek({topic:u},d),w&&ek({search:w},d)}function e1(e,t){return e=e.replace(RegExp(t+"(?!([^<]+)?<)","gi"),'<span class="stamped-keyword-highlight">$&</span>')}function e2(t,a){if((ea=et(en)).length){var s=ea.attr("data-product-id"),r=ea.attr("data-product-sku"),d=ea.attr("data-product-type"),n=ea.attr("data-name"),o=ea.attr("data-take-questions")||5,l=ea.attr("data-search-qna");a||(a=ea.attr("data-sort-qna")||et(".stamped-container",ea).attr("data-widget-sort-qna"));var p=ea.data("linkify")||!1;s&&(to("Loading Q&A"),et.ajax({type:"GET",url:X.SECURE_ENDPOINT+"/widget/questions",data:{productId:s,productSKU:r,productType:d,productTitle:n,page:t||1,apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,take:o||5,search:l,sort:a},success:function(e){if(!0==e.a&&et(".stamped-questions").length){s=e.result,r=e.t,d=e.form,n=e.p,l=e.avatar,et("#tab-questions").text(),et("#tab-questions").attr("data-count",r),function e(t){if(et(".stamped-questions").length&&!et(".question-form-wrapper").length){var a=et('<div class="question-form-wrapper">').html(t);et(".new-review-form").before(a)}}(d);var s,r,d,n,l,c=et('<div id="stamped-questions-tab" class="stamped-questions" role="tabpanel" aria-labelledby="tab-questions" tabindex="-1">');if(et(".stamped-questions").html(""),c.append(s),l){var m=et(".stamped-review #stamped-review-avatar",c),u=et('<img src="'+l+'" width="100">');m.html(u)}var h=et(".stamped-questions-placeholder");h.length?(et(".stamped-questions",h).html(""),et(".stamped-questions",h).replaceWith(c),et(".stamped-questions",h).length||(et(".stamped-questions").appendTo(h),et(".stamped-questions").replaceWith(c)),et(".stamped-questions",h).show(),et("#tab-questions").hide(),et(".question-form-wrapper").prependTo(h),et(".stamped-summary-actions-newquestion").prependTo(h)):(et(".stamped-questions").replaceWith(c),t?et(".stamped-questions").show():et(".stamped-questions").hide()),function e(t,a,s){var r=t>0?t/s<1?1:Math.ceil(t/s):1;if(1!=r){var d='<div class="stamped-pagination" id="stamped-pagination-question"><div><span id="stamped-pagination-prev" class="previous"><a href="#" onclick="StampedFn.pageQuestions(this)" role="link" tabindex="0" data-product-id="" data-page="'+(a-1)+'"><</a></span><span id="pages"></span><span id="stamped-pagination-next" class="next"><a onclick="StampedFn.pageQuestions(this)" role="link" tabindex="0" data-product-id="" data-page="'+(a+1)+'">></a></span></div></div>',n=et(".stamped-questions"),o=et(".stamped-questions-placeholder");o.length&&(n=et(".stamped-questions",o));var l=et(".stamped-pagination",n);l.length?l.replaceWith(d):n.append(d),l=et(".stamped-pagination",n);var t=r,a=a,p=[];if(p.push(1),t<=7){for(m=2;m<t;m++)p.push(m);t==a&&p.push(a)}if(t>=8){a-2>=1&&(a-2!=1&&p.push(a-2),p.push(a-1)),1!=a&&p.push(a);var c=a+2;c<=t&&(p.push(a+1),c!=t&&p.push(a+2))}1==a||1==a?et("#stamped-pagination-prev",l).hide():et("#stamped-pagination-prev",l).show(),t==a||1==t?et("#stamped-pagination-next",l).hide():et("#stamped-pagination-next",l).show(),t!=a&&p.push(t);for(var m=0;m<p.length;m++)p[m]==a?et("#pages",l).append(' <span class="page active"><a style="cursor:pointer;" onclick="StampedFn.pageQuestions(this)" role="button" tabindex="0" data-product-id="" data-page="'+p[m]+'">'+p[m]+"</a></span> "):et("#pages",l).append(' <span class="page"><a style="cursor:pointer;" onclick="StampedFn.pageQuestions(this)" role="button" tabindex="0" data-product-id="" data-page="'+p[m]+'">'+p[m]+"</a></span> ")}}(r,t||1,o),h.length?t>1&&eY(".stamped-questions-placeholder"):t>1&&eY(en),a||et(".stamped-questions-filter .stamped-sort-select").val("recent"),p&&et(".stamped-review-reply-body",c).each(function(){if(!et(this).attr("data-link-processed")){et(this).attr("data-link-processed",!0);var e=et(this).html();et(this).html(e.linkify())}}),t_("stamped:questions:loaded")}}}))}}function e4(e,t){!et("#stamped-questions-placeholder, .stamped-questions-placeholder").length&&(et(".stamped-tabs #tab-reviews").removeClass("active"),et(".stamped-tabs #tab-questions").removeClass("active"),"questions"==t?et(".stamped-tabs #tab-questions").addClass("active"):"reviews"==t&&et(".stamped-tabs #tab-reviews").addClass("active"),e&&(et(e).addClass("active"),t=et(e).data("type")),"reviews"==t?(et(".stamped-reviews").show(),et(".stamped-reviews-filter").show(),et(".stamped-questions").hide(),et(".stamped-questions-filter").hide(),et(".stamped-reviews").attr("tabindex",0),et(".stamped-questions").attr("tabindex",-1),et("#stamped-sort-select").show()):"questions"==t&&(et(".stamped-reviews").hide(),et(".stamped-reviews-filter").hide(),et(".stamped-questions").show(),et(".stamped-questions-filter").show(),et(".stamped-reviews").attr("tabindex",-1),et(".stamped-questions").attr("tabindex",0),et("#stamped-sort-select").hide()),et(".new-review-form").hide(),et(".new-question-form").hide())}var eW=[],eM=!1;function eB(t,a){var s=et(t),r=s.attr("data-element-id"),d=s.attr("data-widget-type");s.attr("data-widget-persist-data");var n=s.attr("data-review-id"),o=s.attr("data-review-ids")?s.attr("data-review-ids").toString().split(","):null,l=s.attr("data-product-id"),p=s.attr("data-product-ids")?s.attr("data-product-ids").toString().split(","):null,c=s.attr("data-product-category")||s.attr("data-product-type"),m=s.attr("data-product-brand"),u=s.attr("data-product-sku");s.attr("data-product-title");var h=s.attr("data-limit-words"),v=s.attr("data-random"),f=s.attr("data-show-avatar"),g=s.attr("data-take"),w=s.attr("data-fill-empty"),y=s.attr("data-min-rating"),b=s.attr("data-min-length"),$=s.attr("data-rating"),k=s.attr("data-tags"),_=s.attr("data-tags-exclude"),S=s.attr("data-topic"),C=s.attr("data-syndication")||!0,I=s.data("with-photos"),x=s.data("with-videos"),T=s.data("sort-reviews"),O=s.data("widget-data"),E=s.data("widget-language"),U=s.data("widget-country-iso"),q=s.data("instagram-gallery-id"),A=s.data("album-id"),j=s.data("customer-email"),N=s.data("customer-first-name"),G=s.data("customer-id"),L=d.indexOf("rewards")>-1?X.referral_code:null,R=s.data("is-preview");return{type:d,reviewId:n,reviewIds:o,productId:l,productIds:p,productCategory:c,productBrand:m,productSKU:u,limitWords:h,random:v,showAvatar:f,isFillEmpty:w,apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,page:a,skip:g,minRating:y,minLength:b,rating:$,isWithPhotos:I,isWithVideos:x,sortReviews:T,instagramGalleryId:q,albumId:A,dataType:O,widgetLanguage:E,widgetCountryIso:U,tags:k,tagsExclude:_,topic:S,isSyndication:C,elementId:r,customerEmail:j,customerFirstName:N,customerExternalId:G,referralCode:L,isPreview:R}}function e5(e,t){var a=X.SECURE_ENDPOINT+"/widget/reviews/batch";et.ajax({type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({data:t}),xhrFields:{withCredentials:!0},url:a,success:function(t,a,s){for(var r=t.length,d=100,n=0;n<r;n++)if(t[n]){d+=50;var o,l=t[n].elementId;o="rewards"==e?et('#stamped-rewards-widget[data-element-id="'+l+'"]'):et('#stamped-reviews-widget[data-element-id="'+l+'"]'),e6(o,t[n],t.translations,d)}}})}function e6(a,s,r,d,n){setTimeout(function(){if(s){var r=s.template,d=s.lang,o=a.attr("data-widget-type"),l=a.data("widget-persist-data")||!1;if(et(a).attr("data-lang",d||"en"),"instagram-feed"!=o&&"instagram-feed-dev"!=o&&"visual-gallery"!=o&&!0!=l&&et(a).html(""),"single"==o)a.append(r),StampedWidgetSingleFn,StampedWidgetSingleFn.init(s.data,a,et);else if("full-page"==o||"full-page-nps"==o){var p=a.attr("data-rich-snippet"),c="/"==location.pathname;if(s.total>0&&"true"==p&&!c){var m={"@context":"http://schema.org","@type":"Product",name:s.shop,aggregateRating:{"@type":"AggregateRating",ratingValue:s.rating,reviewCount:s.total}},u=t.createElement("script");u.type="application/ld+json",u.innerHTML=JSON.stringify(m),t.getElementsByTagName("head")[0].appendChild(u)}a.append(r),StampedWidgetFullPageFn,StampedWidgetFullPageFn.init(s,a,et)}else"full-page-multiple"==o?(a.append(r),StampedWidgetFullPageMultipleFn,StampedWidgetFullPageMultipleFn.init(s,a,et)):"reviews-highlight"==o?(a.append(r),StampedWidgetReviewsHighlightFn,StampedWidgetReviewsHighlightFn.init(s,a,et)):"reviews-popup"==o?(a.append(r),StampedWidgetReviewsPopupFn,StampedWidgetReviewsPopupFn.init(s,a,et)):"people-highlight"==o?(a.append(r),StampedWidgetPeopleHighlightFn,StampedWidgetPeopleHighlightFn.init(s,a,et)):"drawer"==o?(a.append(r),StampedWidgetDrawerFn,StampedWidgetDrawerFn.init(s,a,et)):"carousel"==o?(a.append(r),StampedCarouselFn,StampedCarouselFn.init(s,a,et)):"carousel-nps"==o?(a.append(r),StampedCarouselNPSFn,StampedCarouselNPSFn.init(s,a,et)):"carousel-checkout-comments"==o?(a.append(r),StampedCarouselCheckoutCommentFn,StampedCarouselCheckoutCommentFn.init(s,a,et)):"carousel-photos"==o?(a.append(r),StampedCarouselPhotosFn,StampedCarouselPhotosFn.init(s.data,a,et)):"site-badge"==o?(a.append(r),StampedSiteBadgeFn,StampedSiteBadgeFn.init(s,a,et)):"top-rated"==o?(a.append(r),StampedTopRatedFn,StampedTopRatedFn.init(s,a,et)):"wall-photos"==o?(a.append(r),StampedWallPhotosFn,StampedWallPhotosFn.init(s,a,et),n&&eY(a)):"checkout-comments"==o?(a.append(r),StampedCheckoutCommentsFn,StampedCheckoutCommentsFn.init(s,a,et)):"instagram-feed"==o?(et(a).is(":empty")&&a.append(r),StampedInstagramFeedFn,StampedInstagramFeedFn.init(s,a,et)):"visual-gallery"==o?(e.stampedVisualGalleryDataArr||a.append(r),StampedVisualGalleryFeedFn,StampedVisualGalleryFeedFn.init(s,a,et)):"facebook-messenger-optin"==o?(StampedFacebookMessengerOptinFn,StampedFacebookMessengerOptinFn.init(s,a,et)):"nps-submission-form"==o?(a.append(r),StampedNPSSubmissionForm,StampedNPSSubmissionForm.init(s,a,et)):"rewards-summary"==o?(a.append(r),StampedRewardsSummary,StampedRewardsSummary.init(s,a,et)):"rewards-how-it-works"==o?(a.append(r),StampedRewardsHowItWorks,StampedRewardsHowItWorks.init(s,a,et)):"rewards-referral-modal"==o?(a.append(r),StampedRewardsReferralModal,StampedRewardsReferralModal.init(s,a,et)):"rewards-referral-claim-modal"==o?(a.append(r),StampedRewardsReferralClaimModal,StampedRewardsReferralClaimModal.init(s,a,et)):"rewards-earnings"==o||"rewards-earnings-v2"==o?(a.append(r),StampedRewardsEarnings,StampedRewardsEarnings.init(s,a,et)):"rewards-spendings"==o||"rewards-spendings-v2"==o?(a.append(r),StampedRewardsSpendings,StampedRewardsSpendings.init(s,a,et)):"rewards-vip-tiers"==o?(a.append(r),StampedRewardsVIPTiers,StampedRewardsVIPTiers.init(s,a,et)):"rewards-referral"==o?(a.append(r),StampedRewardsReferral,StampedRewardsReferral.init(s,a,et)):"rewards-activities"==o?(a.append(r),StampedRewardsActivities,StampedRewardsActivities.init(s,a,et)):"rewards-redeem-variable-slider"==o?(a.append(r),StampedRewardsRedeemVariableSlider,StampedRewardsRedeemVariableSlider.init(s,a,et)):"rewards-redeem-select-options"==o&&(a.append(r),StampedRewardsRedeemSelectOptions,StampedRewardsRedeemSelectOptions.init(s,a,et));et(".free-tier-banner").lenght<1&&et(".free-tier-banner").detach().appendTo("#stamped-reviews-widget"),t_("stamped:reviews:widget:loaded")}},d)}function eV(e,a,s){if(s){var r=new Date;r.setTime(r.getTime()+864e5*s);var d="; expires="+r.toGMTString()}else var d="";t.cookie=e+"="+a+d+"; path=/; SameSite=None; Secure"}function e9(e){for(var a=e+"=",s=t.cookie.split(";"),r=0;r<s.length;r++){for(var d=s[r];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null}function eQ(e){eV(e,"",-1)}function eH(e){for(var t in e)(null===e[t]||""===e[t]||void 0===e[t])&&delete e[t];return e}var e7=!1;function eY(e){if(et(e).length){var t=et(en).attr("data-animation");if(to("Animation: "+t),"false"===t||!1===t);else{if(!0==e7)return;e7=!0;var a=et(e),s=et("html, body"),r=et(en).attr("data-offset")||et(e).attr("data-offset")||1;ep()&&(r=et(en).attr("data-offset-mobile")||et(e).attr("data-offset-mobile")||1),s.on("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove",function(){s.stop(),e7=!1}),s.animate({scrollTop:a.offset().top-r},t||1e3,function(){s.off("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove"),e7=!1})}}}function eX(e){return e.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function eJ(e){if("review"==e){e4(null,"reviews");var t=et(".new-review-form"),a=et(".new-question-form");a.slideUp(),a.removeClass("stamped-visible"),t.hasClass("stamped-visible")?(t.slideUp(),t.removeClass("stamped-visible"),t.attr("aria-expanded","false")):(t.slideDown(400,function(){eY("#stamped-main-widget .new-review-form")}),t.addClass("stamped-visible"),t.attr("aria-expanded","true")),et(t).find("input[type=text]").length>0&&et(t).find("input[type=text]").get(0).focus()}else if("question"==e){e4(null,"questions");var t=et(".new-question-form"),a=et(".new-review-form");a.slideUp(),a.removeClass("stamped-visible"),t.hasClass("stamped-visible")?(t.slideUp(),t.removeClass("stamped-visible")):(t.slideDown(400,function(){eY(".new-question-form")}),t.addClass("stamped-visible"),a.attr("aria-expanded","false")),et(t).find("input[type=text]").length>0&&et(t).find("input[type=text]").get(0).focus()}}function eZ(e){var t,a,s,r,d;t=et(e).parents(".new-review-form"),s=et(e).attr("data-value"),a=et(e).parent(),t.find("input[name='reviewRating']").val(s),r=s,(d=a).find("a:lt("+r+")").removeClass("fa-star-o").addClass("fa-star-checked"),d.find("a:gt("+(r-1)+")").removeClass("fa-star-checked").addClass("fa-star-o"),function e(t){Array.prototype.slice.call(t.parentNode.children).forEach(function(e){e.setAttribute("aria-pressed",!1)});var a=t.getAttribute("aria-pressed");t.setAttribute("aria-pressed",!JSON.parse(a))}(e)}function te(e,t,a,s){if(et(en).length){var r,d,n,o,l,p,c,m;d=function e(t,a){for(var s=[],r=0;r<a;)s[r++]="★";return s.join("")}("★",(r=e).reviewRating),n=ea.attr("data-image-url")||"",o="https://stamped.io/facebookpost?caption="+d+" "+encodeURIComponent(r.reviewTitle)+"&name="+d+" "+encodeURIComponent(r.reviewTitle)+"&description="+encodeURIComponent(r.reviewMessage)+"&link="+encodeURIComponent(r.productUrl)+"&picture="+encodeURIComponent(n.replace("%3F","?")),l="https://www.facebook.com/dialog/feed?app_id=222664514734026&display=popup&link="+encodeURIComponent(o)+"&name="+encodeURIComponent(r.reviewTitle)+"&redirect_uri=https://stamped.io/shares?productId="+r.productId,p="https://twitter.com/intent/tweet?text="+d+" "+r.reviewMessage.substr(0,140)+"&url="+encodeURIComponent(r.productUrl),c="https://plus.google.com/share?url="+encodeURIComponent(r.productUrl),m=et(".stamped-thank-you .stamped-share-links"),et(".facebook",m).attr("href",l).attr("target","_blank"),et(".twitter",m).attr("href",p).attr("target","_blank"),et(".google",m).attr("href",c).attr("target","_blank"),et(".stamped-user-review",ea).hide(),et(".stamped-thank-you",ea).show(),et(".stamped-thank-you p",ea).show(),et(".stamped-thank-you .stamped-share-links",ea).show(),et(".new-review-form",ea).hide(),et(".edit-review-form",ea).hide(),et(".stamped-summary-actions-newreview").hide(),et("#stamped-button-submit",ea).removeAttr("disabled"),s&&et("#stamped-button-submit",ea).val(s),eY(en),function e(t,a,s){if(null!=e9("stamped-user-reviews")){for(var r,d=JSON.parse(e9("stamped-user-reviews")),n=!1,o=0;o<d.length;o++)if(d[o].pid==t){n=!0,r=d[o];break}!n&&t&&a&&!0==s&&(d.length>=10&&d.splice(0,1),d.push({pid:t,v:a}),eV("stamped-user-reviews",JSON.stringify(d),1))}else t&&a&&!0==s&&eV("stamped-user-reviews",JSON.stringify([{pid:t,v:a}]),1)}(a.productId,t.userReference,!0)}t_("stamped:reviews:submitted")}function tt(e){var t=1;e&&(t=et(e).data("page")),e2(t)}function ta(e,t,a){!et&&jQuery&&(et=jQuery),a&&et(a).closest(en).length&&(ea=et(a).closest(en)),ea.attr("data-product-id");var s,r=et(".stamped-summary-ratings.selected .summary-rating-bar.selected",ea).attr("data-rating");r&&(t=r),et(".stamped-sort-select",ea).length&&(s=et(".stamped-sort-select",ea).val()),ez(e,s,t)}function ts(e){if("qna"==e)et(".stamped-questions-filter .stamped-summary-actions-clear").hide(),et(".stamped-questions-search-input").val(""),et(".stamped-questions-search-clear").hide(),et(ea).removeAttr("data-search-qna"),tt();else{var t;et("select.stamped-filter-select").each(function(){et(this).val("")}),et(".stamped-summary-keywords-list li").removeClass("selected"),et(ea).removeAttr("data-keyword"),et(".stamped-reviews-filter .stamped-summary-actions-clear").hide(),et(".stamped-reviews",ea).removeAttr("data-filtered"),et(".stamped-sort-select").length&&(t=et(".stamped-sort-select").val()),ed={},et(".stamped-reviews-search-input").val(""),et(".stamped-reviews-search-clear").hide(),et(ea).removeAttr("data-search"),eP(),ez(1,t,null,!0)}}String.linkify||(String.prototype.linkify=function(){return this.replace(/\b(?:https?|ftp):\/\/[a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|]/gim,'<a href="$&" target="_blank">$&</a>').replace(/(^|[^\/])(www\.[\S]+(\b|$))/gim,'$1<a href="http://$2" target="_blank">$2</a>').replace(/[\w.]+@[a-zA-Z_-]+?(?:\.[a-zA-Z]{2,6})+/gim,'<a href="mailto:$&">$&</a>')});var tr=!1,ti=null,td=null;function tn(t,a){a||(a=e.location.href);var s=RegExp("[?&]"+(t=t.replace(/[\[\]]/g,"\\$&"))+"(=([^&#]*)|&|#|$)").exec(a);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null}function to(t,a){var s="true"==tn("stamped_debug")||!0==e.stamped_debug,r=e.stamped_debug_level||tn("stamped_debug_level");s&&(a||console.log("[Stamped.io]",t),a&&r&&console.log("[Stamped.io level"+r+"]",t))}function tl(e,a){(ee=t.createElement("script")).type="text/javascript",ee.charset="UTF-8",ee.src=e;var s=t.getElementsByTagName("script")[0];s.parentNode.insertBefore(ee,s),ee.onload=ee.onreadystatechange=a}function tp(e,t){try{if("undefined"!=typeof Storage)return localStorage.setItem(e,JSON.stringify(t)),!0;return!1}catch(a){}}function tc(e,t){try{var a;if("undefined"==typeof Storage)return!1;try{a=JSON.parse(localStorage.getItem(e))||null}catch(s){a=localStorage.getItem(e)}return a}catch(r){}}function tm(){return X}function tu(e,t){var a="stamped_app_key",s=tc(a);if(s&&s.apiKey)to(s),t_("stamped:init:getAppKey",{detail:s}),th(s);else{(r=new XMLHttpRequest).onreadystatechange=function(){if(4===r.readyState&&200===r.status){var e=JSON.parse(r.responseText);if(e&&e.apiKey){if(tp(a,e),t_("stamped:init:getAppKey",{detail:e}),!0===e.skip);else{var t={apiKey:appKey=e.apiKey};"undefined"!=typeof Shopify?t.storeUrl=Shopify.shop:t.sId=e.sId,th(t)}}}};var r,d="";"shopify"==e?d="shopShopifyDomain="+t:"bigcommerce"==e&&(d="storeHash="+t),r.open("GET","https://stamped.io/api/getappkey?"+d,!0),r.send()}}function th(t){if(!0==e.isInitializedStamped){to("Already initalized"),StampedFn.loadWidget(!0),StampedFn.loadDisplayWidgets();return}if(e.isInitializedStamped=!0,t&&(e.StampedGlobalOptions=t),e.StampedGlobalOptions&&e.StampedGlobalOptions.apiKey){var a="true"==tn("stamped_force_jquery")||X.is_force_jquery;"undefined"==typeof jQuery||!0==a?tl("https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js",function(){et=jQuery.noConflict(!0),eh(),e.isInitializedStamped=!0}):(eh(null,jQuery),e.isInitializedStamped=!0)}}var tv=t.getElementById("stamped-script-widget");tv||(tv=t.getElementById("stamped-script-init"));var tf="";tv&&(tf=tv.src);var tg=!1;if((tf.indexOf("skipCss=true")>0||!0==X.exclude_main_css)&&(tg=!0),tg||function e(a){for(var s=t.styleSheets,r=0,d=s.length;r<d;r++)if(s[r]&&s[r].href&&s[r].href.indexOf(a)>-1)return;var n=t.createElement("link");n.rel="stylesheet",n.href=a,n.type="text/css";var o=t.getElementsByTagName("link")[0];if(o)o.parentNode.insertBefore(n,o);else{var l=t.getElementsByTagName("head")[0];n.setAttribute("async",""),l.appendChild(n)}}("//cdn1.stamped.io/files/widget.min.css"),"undefined"!=typeof Shopify){var tw=!1;if(Shopify.shop){if(null!=tv){tf.indexOf("skip=true")>-1&&(tw=!0);var ty=tv.getAttribute("data-api-key");!ty&&tf.indexOf("apiKey")>-1&&(ty=tn("apiKey",tf)),ty&&(tw=!0,th({apiKey:ty,storeUrl:Shopify.shop}))}tw||tu("shopify",Shopify.shop)}if(Shopify.Checkout&&"undefined"==typeof StampedShopifyCheckout){if("function"==typeof e.StampedShopifyCheckout)return!1;tl("//cdn1.stamped.io/files/shopify-checkout.min.js",function(){t_("stamped:script-shopify-checkout:loaded")})}}if(null!=tv){var tb=tv.getAttribute("data-store-hash");tb&&tu("bigcommerce",tb);var t$=tv.getAttribute("data-store-id"),tk=tv.getAttribute("data-api-key"),t8=tv.getAttribute("data-auto-init");t$&&tk&&"false"!=t8&&th({apiKey:tk,sId:t$})}function t_(a,s){var r;e.CustomEvent?r=new CustomEvent(a,s):(r=t.createEvent("CustomEvent")).initCustomEvent(a,!0,!0,s);try{t.dispatchEvent(r)}catch(d){}}return{init:th,initRewards:eg,reloadUGC:ef,toggleForm:eJ,setRating:eZ,submitForm:function t(a){var s,r,d,n,o=ea.data("label-submitting"),l=et(".new-review-form .stamped-button-primary",ea).val(),p=null;if((s=(d={},et(r=a).hasClass("new-review-form")||(r=et(r).parents(".new-review-form")),n=et("input,textarea,select,radio",r).serializeArray(),et.each(n,function(){void 0!==d[this.name]?(d[this.name].push||(d[this.name]=[d[this.name]]),d[this.name].push(this.value||"")):d[this.name]=this.value||""}),d)).reviewRating&&s.author&&s.reviewMessage.trim()){var c={productName:ea.attr("data-name"),productId:ea.attr("data-product-id"),productSKU:ea.attr("data-product-sku"),productType:ea.attr("data-product-type"),productDescription:ea.attr("data-description"),productImageUrl:ea.attr("data-image-url"),productUrl:ea.attr("data-url"),reviewSource:"widget",userReference:ea.attr("data-user-reference")};p=s=et.extend(s,c);var m=new FormData;for(var u in s){var h=s[u];h.indexOf("+")>-1&&u.indexOf("customFormOption")>-1&&(h=s[u].replace("+","%2B")),m.append(u,h)}var v=0;for(var f in er)m.append("image"+v,er[v]),s["image"+v]=er[v],v++;to(Object.prototype.toString.call(m)),to(m);var g={url:""+X.SECURE_ENDPOINT+"/reviews3?"+et.param(eH({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl})),cache:!1,processData:!1,contentType:!1,type:"POST",data:m._blob?m._blob():m,beforeSend:function(e){et("#stamped-button-submit",ea).attr("disabled","disabled"),o&&et("#stamped-button-submit",ea).val(o)},error:function(e){t_("stamped:reviews:submitError"),!0==X.is_ignore_submit_error?te(p,e,c,l):(et("#stamped-button-submit",ea).removeAttr("disabled"),l&&et("#stamped-button-submit",ea).val(l))},success:function(e){te(p,e,c,l)}};et.ajax(g)}},submitQuestionForm:function t(a){var s=a?et(a):et("#new-question-form"),r=et(en);if(s.length&&r.length){var d=r.data("name"),n=r.data("description"),o=r.data("product-sku"),l=r.data("url"),p=r.data("image-url"),c=s.serializeArray();c.push({name:"productName",value:d}),c.push({name:"productDescription",value:n}),c.push({name:"productSKU",value:o}),c.push({name:"productUrl",value:l}),c.push({name:"productImageUrl",value:p}),c.push({name:"apiKey",value:e.StampedGlobalOptions.apiKey}),c.push({name:"sId",value:e.StampedGlobalOptions.sId}),c.push({name:"storeUrl",value:e.StampedGlobalOptions.storeUrl}),et('input[type="submit"]',s).attr("disabled","disabled"),et.ajax({type:"POST",url:"https://stamped.io/api/questions",data:et.param(c),crossDomain:!0,success:function(e){s.hide(),et(".question-form-wrapper .stamped-form-message-success").show(),et(".stamped-form-message-success").attr("aria-live","polite"),s[0].reset(),et('input[type="submit"]',s).removeAttr("disabled")}})}},toggleFormEdit:function e(){et(".edit-review-form",ea).toggle()},pageQuestions:tt,sortQuestions:function e(t){t.value&&e2(1,t.value)},pageReviews:ta,sortReviews:function e(t){ea.attr("data-product-id"),t.value&&ez(1,t.value,null,!0)},filterReviews:function e(t){var a,s=et("option:first-child",t).text(),r=t.value;ed={};var d=1;et("select.stamped-filter-select").each(function(){var e=et("option:first-child",this).text(),t=this.value;ed["qt"+d]=e,ed["qv"+d]=t,d++}),et(".stamped-reviews-filter .stamped-summary-actions-clear").show(),et(".stamped-reviews",ea).attr("data-filtered","true"),et(".stamped-sort-select").length&&(a=et(".stamped-sort-select").val()),ez(1,a,null,!0),s&&r&&ek({customOptionTitle:s,customOptionValue:r},ea.attr("data-product-id"))},filterClear:ts,pageWidget:function e(t,a){var s,r,d,n,o,l=et(t).data("page"),p=et(t).closest("#stamped-reviews-widget");p.attr("data-page",l),s=p,r=l,d=a,n=X.SECURE_ENDPOINT+"/widget/reviews",o=eB(s,r),d=d||{},et.ajax({type:"GET",url:n+"?"+et.param(eH(o)),dataType:"json",success:function(e,t,a){e6(s,e,null,0,!0),d.callback&&d.callback()}})},loadBadges:e0,loadWidget:eA,loadDisplayWidgets:eN,loadDisplayWidgetsRewards:eG,voteReview:function t(a,s,r){var d=et(a),n=d.parent();n.fadeTo("slow",.3),d.addClass("disable-link"),et.ajax({type:"POST",url:X.SECURE_ENDPOINT+"/reviews/vote",data:{reviewId:s,vote:r,apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl},success:function(e){et(".stamped-thumbs-up",n).attr("data-count",e.voteUp),et(".stamped-thumbs-down",n).attr("data-count",e.voteDown),et(".stamped-ugc-modal-vote-up",n).attr("data-count",e.voteUp),et(".stamped-ugc-modal-vote-down",n).attr("data-count",e.voteDown),et(".stamped-thumbs-up i",n).html("&nbsp; "+e.voteUp),et(".stamped-thumbs-down i",n).html("&nbsp; "+e.voteDown),n.fadeTo("slow",1),d.removeClass("disable-link")}})},openUGCModal:function a(s,r,d,n,o,l,p,c,m){1!==n&&n||(s=function e(t,a){var s=[];for(i=0;i<t.length;i++){var r=t[i];if(!0!=a||r.reviewUserPhotos||r.reviewUserVideos){var d={photos:[],videos:[],name:r.author,via:"Photos",title:r.reviewTitle,body:r.reviewMessage,date:r.reviewDate,reply:r.reviewReply,dateReplied:r.dateReplied,dateFull:r.dateCreated,verifiedType:r.reviewVerifiedType,rating:r.reviewRating,products:[{url:r.productUrl,title:r.productName,imageUrl:r.productImageUrl,imageLargeUrl:r.productImageLargeUrl,productUrl:r.productDirectUrl||""}],review_id:r.id,votes:{up:r.reviewVotesUp,down:r.reviewVotesDown},options:[]};if(r.reviewUserPhotos||r.reviewUserVideos){if(r.reviewUserVideos){var n=r.reviewUserVideos.split(",");for(ii=0;ii<n.length;ii++){var o="//s3.us-west-2.amazonaws.com/stamped.io/uploads/videos/"+n[ii],l="//cdn.stamped.io/uploads/videos/"+n[ii]+".jpg";0>o.indexOf(".mp4")&&(o+=".mp4"),o.indexOf("nothumb")>=0&&(l=""),d.photos.push({videoUrl:o,imageThumbnailUrl:l})}}if(r.reviewUserPhotos){var p=r.reviewUserPhotos.split(","),c="//cdn.stamped.io/uploads/photos/";for(r.reviewUserPhotosWatermark&&(c="//cdn.stamped.io/"+r.reviewUserPhotosWatermark+"/uploads/photos/"),ii=0;ii<p.length;ii++)d.photos.push({imageUrl:c+p[ii],imageThumbnailUrl:"//cdn.stamped.io/uploads/photos/thumb/"+p[ii]})}}else d.photos.push({imageUrl:r.productImageLargeUrl,imageThumbnailUrl:r.productImageUrl});if(r.reviewOptionsList&&r.reviewOptionsList.length)for(ii=0;ii<r.reviewOptionsList.length;ii++)d.options.push({message:r.reviewOptionsList[ii].message,value:r.reviewOptionsList[ii].value});s.push(d)}}return s}(s,o)),null!=s||s.length||U(r,l),p||(p="en");var u,h,v,f='<div class="stamped-ugc-modal" data-lang="'+p+'" role="dialog" aria-modal="true" aria-label="Customer Review Photos" data-keyboard="true" tabindex="-1"> <div class="stamped-ugc-modal-wrapper" role="region" aria-roledescription="carousel" aria-label="carousel" aria-label="Shop our Instagram look"><span href="javascript:void(0)" title="Close" aria-label="Close" role="button" class="stamped-modal-close show-mobile" style="display:none;" tabindex="0">X</span> <div class="stamped-ugc-modal-nav stamped-ugc-modal-nav-previous" role="button" data-direction="left" tabindex="0" aria-label="Previous Photo"> <i class="stamped-fa stamped-fa-angle-left"></i> </div> <div class="stamped-ugc-modal-image-wrapper" role="group" aria-roledescription="slides" aria-label="slide"> <div class="stamped-ugc-modal-image"></div> <ul></ul> </div> <div class="stamped-ugc-modal-content"> <span href="javascript:void(0)" title="Close" aria-label="Close" role="button" class="stamped-modal-close" tabindex="0">X</span> <div class="stamped-ugc-modal-content-wrapper"> <div class="stamped-ugc-modal-user"> <div class="stamped-ugc-modal-user-source"></div><h1 class="stamped-ugc-modal-user-username"></h1> </div> <div class="stamped-ugc-modal-caption"></div><div class="stamped-ugc-modal-votes"></div> <div class="stamped-ugc-modal-tags"> <span class="stamped-ugc-modal-tag"><a aria-label="Link to Product" {0} target="_top"> <div class="stamped-ugc-modal-tags-product-image-wrapper"><img {1} class="stamped-ugc-modal-tags-product-image" onerror=\'this.style.display = "none"\' alt="{2}" /></div> <div class="stamped-ugc-modal-tags-product-title">{2}</div> </a><div class="stamped-ugc-modal-tags-btn" data-shoppable-url="{3}"></div> </span> </div> </div> </div> <div class="stamped-ugc-modal-nav stamped-ugc-modal-nav-next" role="button" data-direction="right" tabindex="0" aria-label="Next Photo"> <i class="stamped-fa stamped-fa-angle-right"></i> </div> <div class="stamped-ugc-modal-list-photos" role="group"><ul></ul></div> </div> </div>';et(d).attr("data-hover-text"),et(d).attr("data-shop-button-text");var g=et(d).attr("data-url-param")||"",w=et(d).attr("data-url-store")||e.stamped_global_url_store||"";et(d).attr("data-cropped"),et(d).attr("data-page"),et(d).attr("data-take"),et("#stamped-ugc-modal").length||((u=et(f)).attr("data-modal-type",n),u.attr("data-modal-shoppable",m||!1),et(u).appendTo(t.body),u.focus());var y="",b=s.length;h||(h=et(".stamped-ugc-modal-tags:first",u).html());for(var $=s?s.length:0,k=0;k<b;k++){var _=s[k],S=_.imageUrl;S&&(y+=templateBlock.formatStringStamped($,S),$++),_.photos.length&&_.photos[0].imageUrl&&(eW[k]=new Image,eW[k].src=_.photos[0].imageUrl)}if(et(".stamped-ugc-media-block-template",d).append(y),!v){function C(e){switch(e.preventDefault(),e.keyCode){case 37:q("left");break;case 39:q("right");break;case 27:T()}}et(t).on("keydown",C),u.on("click",".stamped-modal-close",function(e){e.target==this&&!0===ec(e)&&T()}),u.on("click keypress",".stamped-ugc-modal-nav-previous, .stamped-ugc-modal-nav-next",function(e){if(!0===ec(e)){var t=et(this).attr("data-direction");q(t)}}),eM||(eM=!0),t.addEventListener("touchstart",function e(t){I=t.touches[0].clientX,x=t.touches[0].clientY},!1),t.addEventListener("touchmove",function e(t){if(I&&x){var a=t.touches[0].clientX,s=t.touches[0].clientY,r=I-a,d=x-s;Math.abs(r)>Math.abs(d)&&(r>0?q("right"):q("left")),I=null,x=null}},!1);var I=null,x=null;function T(){et(t).off("keydown",C),u.remove(),u=null,et("body").removeClass("stamped-modal-open")}}v=!0;var O=function(){var e=Number(et(this).text())+1,t=et(this).data("image-url");et(".stamped-ugc-modal-image-wrapper ul li").removeClass("active"),et(".stamped-ugc-modal-image-wrapper ul li:nth-child("+e+")").addClass("active"),"image"==X.modal_ugc_image_viewer?et(".stamped-ugc-modal-image",u).html('<img src="'+t+'" alt="Customer Photo" />'):et(".stamped-ugc-modal-image",u).css("background-image","url("+t+")"),t_("stamped:ugcmodal:paged")},E=function(){var e=et(this).data("index-review"),t=et(this).data("index-photo");et(".stamped-ugc-modal-list-photos ul li").removeClass("active"),et(".stamped-ugc-modal-list-photos ul li[data-index-review="+e+"][data-index-photo="+t+"]").addClass("active"),U(e,t),t_("stamped:ugcmodal:paged")},U=function(a,r){var d,n=s[a];if(null!=n&&null!=n.photos){if(null!==r?(l=r,r>n.photos.length-1&&(l=0)):l?l>n.photos.length-1&&(l=0):l=0,!et(".stamped-ugc-modal-list-photos ul li",u).length){for(var o=0;o<s.length;o++)for(var m=0;m<s[o].photos.length;m++){var v=a==o&&r==m?"active":"";s[o].photos[m].imageUrl;var f=s[o].name+" "+s[o].title,y=s[o].photos[m].imageThumbnailUrl,b=t.createElement("li");b.className=v,b.innerHTML="",b.className+=" stamped-lazyload";var $=t.createAttribute("data-index-review");$.value=o,b.setAttributeNode($);var _=t.createAttribute("data-index-photo");if(_.value=m,b.setAttributeNode(_),b.setAttribute("role","button"),b.setAttribute("tabindex",0),b.setAttribute("aria-label",f),e.LazyLoadStamped&&LazyLoadStamped.update){var S=t.createAttribute("data-bg");S.value="url("+y+")",b.setAttributeNode(S)}else b.style.background="url("+y+")";et(".stamped-ugc-modal-list-photos ul",u).append(b),b.onclick=E}et(t).on("click keypress",".stamped-ugc-modal-list-photos li.stamped-lazyload",function(e){ec(e)&&(et(this).attr("aria-current","true"),et(this).siblings().attr("aria-current","false"))});try{e.LazyLoadStamped&&LazyLoadStamped.update&&LazyLoadStamped.update()}catch(C){}}if(et(".stamped-ugc-modal-list-photos li.stamped-lazyload.active").attr("aria-current","true"),et(".stamped-ugc-modal-list-photos li.stamped-lazyload.active").siblings().attr("aria-current","false"),null!=n.photos[l]){var I=n.photos[l].imageUrl,x=n.photos[l].videoUrl;I?"image"==X.modal_ugc_image_viewer?(et("video",et(".stamped-ugc-modal-image",u)).remove(),et(".stamped-ugc-modal-image",u).html('<img src="'+I+'" alt="'+n.via+" photo uploaded by "+n.name+" on "+n.dateFull+'" />')):(et("video",et(".stamped-ugc-modal-image",u)).remove(),et(".stamped-ugc-modal-image",u).css("background-image","url("+I+")")):x&&et(".stamped-ugc-modal-image",u).fadeOut("",function(){et(".stamped-ugc-modal-image",u).css("background-image",'url("")'),et(".stamped-ugc-modal-image",u).html('<video class="stamped-ugc-modal-video" src="'+x+'" width="100%" controls autoplay />'),et(this).fadeIn()})}for(et(".stamped-ugc-modal-image-wrapper ul",u).html(""),ii=0;ii<n.photos.length;ii++){var T=ii===l?"active":"",U=t.createElement("li");U.className=T,U.innerHTML=ii;var _=t.createAttribute("data-image-url");_.value=n.photos[ii].imageUrl,U.setAttributeNode(_),et(".stamped-ugc-modal-image-wrapper ul",u).append(U),U.onclick=O}et(".stamped-ugc-modal-user-source").text(n.via);var q=et(".stamped-ugc-modal-user-username",u);q.text(n.name),q.attr("data-verified-type",n.verifiedType),q.attr("data-username",n.name);var A="Verified Buyer",j="Shop Now";c&&"en"!=p&&(A=c.label_verified_buyer||A,j=c.label_shop_now||j),q.append('<span class="stamped-verified-badge">'+A+"</span>"),et(".stamped-ugc-modal-tags-btn",u).append("<span>"+j+"</span>");var N="";if(n.rating){for(var G=0;G<n.rating;G++)N+='<i class="stamped-fa stamped-fa-star" aria-hidden="true"></i>';for(var G=0;G<5-n.rating;G++)N+='<i class="stamped-fa stamped-fa-star-o" aria-hidden="true"></i>'}var L="";if(n.options&&n.options.length){for(L+='<ul class="">',k=0;k<n.options.length;k++){var R=n.options[k].message,F=n.options[k].value,P=eX(R);L+='<li data-value="'+P+'"><span class="stamped-ugc-modal-options-message">'+R+'</span> <span class="stamped-ugc-modal-options-value">'+F+"</span></li>"}L+="</ul>"}n.reply||(n.reply=""),d=new Date(n.dateFull?n.dateFull:n.date);var D=new timeagoStamped().formatDateString(d);for("en"!=p&&(D=n.date),et(".stamped-ugc-modal-caption",u).html('<div class="stamped-ugc-modal-date" data-date="'+n.date+'">'+D+'</div><div class="stamped-ugc-modal-caption-rating">'+N+'</div><div class="stamped-ugc-modal-caption-options">'+L+'</div><h2 class="stamped-ugc-modal-caption-title">'+(n.title||"")+'</h2> <div class="stamped-ugc-modal-caption-body">'+n.body+'</div> <div class="stamped-ugc-modal-caption-reply">'+n.reply+"</div>"),et(".stamped-ugc-modal-votes",u).html('<span class="stamped-ugc-modal-vote-up" aria-pressed="false" role="button" aria-label="Rate review as helpful" tabindex="0" data-count="'+n.votes.up+'" onclick="StampedFn.voteReview(this, '+n.review_id+',1)"><i class="stamped-fa stamped-fa-thumbs-up"></i></span><span class="stamped-ugc-modal-vote-down" aria-pressed="false" tabindex="0" role="button" aria-label="Rate review as not helpful" data-count="'+n.votes.down+'" onclick="StampedFn.voteReview(this, '+n.review_id+',-1)"><i class="stamped-fa stamped-fa-thumbs-down"></i></span>'),et(".stamped-ugc-modal-tags",u).html(""),k=0;k<n.products.length;k++){var K=n.products[k];K.title=K.title?K.title:"",w?(K.url=K.url.replace("?storeUrl=https://",""),K.url=K.url+"?storeUrl="+w):g&&(K.url=K.url+"?param="+g);var z=K.imageUrl||K.imageLargeUrl;K.imageUrl?et(".stamped-ugc-modal-tags",u).append(h.formatStringStamped('href="'+K.url+'" rel="nofollow"','src="'+z+'"',K.title,K.productUrl)):et(".stamped-ugc-modal-tags",u).append(h.formatStringStamped('href="'+K.url+'" rel="nofollow"',"",K.title,K.productUrl))}u.attr("data-review-index",a),u.attr("data-photo-index",l),et(".stamped-ugc-modal-votes > span").click(function(){Array.prototype.slice.call(this.parentNode.children).forEach(function(e){e.setAttribute("aria-pressed",!1)});var e=this.getAttribute("aria-pressed");this.setAttribute("aria-pressed",!JSON.parse(e))}),u.hasClass("open")||(u.addClass("open"),et("body").addClass("stamped-modal-open"),t_("stamped:ugcmodal:open"))}},q=function(e){if(u.hasClass("open")){if(u.attr("data-review-index"),u.attr("data-photo-index"),et('[data-direction="right"]',u).removeClass("nav-disabled"),et('[data-direction="left"]',u).removeClass("nav-disabled"),"left"==e){var t=et(".stamped-ugc-modal-list-photos ul li.active").prev();t.click(),t.length||et('[data-direction="left"]',u).addClass("nav-disabled")}else{if("right"!=e)return;var a=et(".stamped-ugc-modal-list-photos ul li.active").next();et(a.click()),a.length||(et('[data-direction="right"]',u).addClass("nav-disabled"),"instagram"==u.attr("data-modal-type")&&t_("stamped:ugcmodal:last"))}}};null!=s&&s.length&&U(r,l)},openUGCPhoto:function t(a,s,r,d){if(tr){for(var n=null,o=0;o<ei.length;o++)ei[o].id==a&&(n=o);null!=n&&StampedFn.openUGCModal(ei,n,et(en),null,null,r,td),tr=!1}else{tr=!0;var l=X.SECURE_ENDPOINT+"/widget/reviews",p=et(ea).attr("data-product-sku")||"",c="",m="",u=[];!0===d?(s=et(ea).attr("data-product-id")||"",c=et(ea).attr("data-name")||"",m=et(ea).attr("data-product-type")||""):et(".stamped-reviews .stamped-review",ea).each(function(){var e=et(this).attr("id");(e=e.replace("stamped-review-",""))&&u.push(e)}),et.ajax({type:"GET",url:l+"?"+et.param(eH({type:"widget-carousel-photos",reviewId:a,reviewIds:u,productId:s,productSKU:p,productType:m,productTitle:c,random:!1,isFillEmpty:!1,page:1,skip:100,minRating:1,isWithPhotos:!0,apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl})),dataType:"json",success:function(e,t,d){ei=e.data;for(var n=null,o=0;o<ei.length;o++)ei[o].id==a&&(n=o);null!=n&&(td=e.lang,StampedFn.openUGCModal(ei,n,et(en),null,null,r,td,e.translations)),tr=!1,ti=s}})}return!1},initOptions:e.StampedGlobalOptions,loadSurveyOptin:function a(s){var r,d=setInterval(function(){void 0!==e.StampedGlobalOptions&&(null!==s&&s.orderId&&et.ajax({type:"GET",url:"https://stamped.io/api/plugin/facebookmessenger?"+et.param(eH({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,orderId:s.orderId,customerEmail:s.customerEmail})),success:function(e){et("body").append(e.html);var a=et("#stamped-facebook-optin .fb-send-to-messenger")[0].outerHTML,s=t.createElement("iframe");s.height="100",s.width="100%",t.body.appendChild(s),et(s).appendTo("#stamped-facebook-optin .fb-send-to-messenger"),s.contentWindow.document.open(),s.contentWindow.document.write("<!DOCTYPE html> <html> <head> <meta charset='utf-8' /> <title></title> </head> <script> var fbPageId, fbUserRef; window.fbAsyncInit = function() { FB.init({ appId : '222664514734026', xfbml : true, version : 'v6.0' }); FB.Event.subscribe('send_to_messenger', function(e) { var modal = window.top.document.getElementById('stamped-facebook-optin'); if (e.event == 'rendered'){ modal.style.display = 'block'; } if (e.event == 'opt_in'){ console.log('hide'); modal.style.display = 'none'; } }); }; (function(d, s, id){ var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) {return;} js = d.createElement(s); js.id = id; js.src = '//connect.facebook.net/en_US/sdk.js'; fjs.parentNode.insertBefore(js, fjs); }(document, 'script', 'facebook-jssdk') ); </script> <body>"+a+"</body> </html>"),s.contentWindow.document.close()}}),clearInterval(d)),++r>=5&&clearInterval(d)},2e3)},closeSurveyOptin:function e(){et("#stamped-facebook-optin").remove()},triggerEvent:t_,on:function e(a,s){t.addEventListener?t.addEventListener(a,s):t.attachEvent("on"+a,function(){s.call(t)})},jQuery:et,stampedLog:to,getOptions:tm,setOptions:function e(t){Object.assign(X,t)},getLoggedInCustomer:function e(){return eo.customer},getDataRewards:eb,loadLauncherView:eC,scrollLauncherView:function e(t){StampedFn.toggleLauncher(!0),setTimeout(function(){var e=et(t,Q).offset();et(".stamped-rewards-content-container",Q).scrollTop(e.top-155),to(et(".stamped-rewards-content-container",Q)),to(e),to(t)},500)},toggleLauncher:e$,toggleRewardsModal:e$,rewardsApplyCode:function e(t){$btn=et("#stamped-rewards-apply-code",Q);var a=et(".stamped-reward-coupon-code",Q).text(),s=$btn.text(),r=$btn.data("type"),d=eo.links;eE("loading");var n=X.is_rewards_code_copy||s.indexOf("Copy")>-1||"copy"==r;if(t_("stamped:rewards:coupon:applied",{detail:a}),!0==n){var o=a;em(o),eE("active")}else{a=encodeURIComponent(a);var l=d.shop+"/checkout?discount="+a;X.rewards_apply_discount_url_format&&(l=rewards_apply_discount_url_format.replace("{0}",a)),t&&t.skip||et.ajax({type:"GET",url:l,data:{},success:function(e,t,a){eE("active")}})}return{code:a,setState:eE}},rewardsReferralClaimCode:function t(){var a=et("#referral_claim_email",Q),s=et("#stamped-rewards-claim-code",Q),r=a.val(),d=StampedFn.getOptions();r&&(eU(s,"loading",!0),et.ajax({type:"POST",url:d.SECURE_ENDPOINT+"/v2/rewards/referral/claim?"+et.param({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,email:r,referralCode:d.referral_code,debug:null}),dataType:"json",success:function(e,t,a){eC("view-coupon",null,{couponCode:e.couponCode,title:e.title,viewTitle:e.title})},error:function(e){var t=e.responseJSON?e.responseJSON.message:e.responseText?JSON.parse(e.responseText).message:"You are not eligible for the reward.";et(".stamped-reward-card-error",Q).text(t)},complete:function(){eU(s,"active",!0,1e3)}}))},rewardsReferralSendEmail:function t(a){var s=et("#email-to",Q),r=et("#email-message",Q),d=et(a),n=s.val(),o=r.val(),l=StampedFn.getOptions();n&&(eU(d,"loading",!0),et.ajax({type:"POST",url:l.SECURE_ENDPOINT+"/v2/rewards/referral/send?"+et.param({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,fromEmail:eo.customer.customerEmail,toEmail:n,message:o,debug:null}),data:{},success:function(e,t,a){},error:function(e){},complete:function(){eU(d,"active",!1,3e4)}}))},rewardsLink:function e(t){var a=eo.links;"login"==t?top.location.href=a.login:"signup"==t&&(top.location.href=a.signup)},rewardsRedeem:function t(a,s,r){eU(a,"loading",!0),s=s||{},et.ajax({type:"POST",url:X.SECURE_ENDPOINT+"/v2/rewards/redeem?"+et.param({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,campaignId:s.campaignId,points:s.points}),data:eo.customer,dataType:"json",success:function(e,t,d){s.campaignId&&eU(a,"active",!0,1),e8(),r&&r(e)}})},rewardsPointsRefresh:e8,rewardsReferralCopy:function e(){var t=et(".stamped-reward-referral-wrapper .stamped-reward-copy-icon",Q);em(eo.customer.urlReferral);var a=t.html();t.html('<i class="far fa-check"></i>'),setTimeout(function(){t.html(a)},3e3)},rewardsCreateActivity:e_,rewardsTriggerEarn:eT,rewardsTriggerSpend:eO,getLauncherWindow:function(){return Q}}}(window,document);
